class BaseHellcorePickup : AetheriusCustomInventory
{
	default
	{
		Scale 0.125;
		+FLOATBOB;
		+DONTGIB;
		+INVENTORY.ALWAYSPICKUP;
		FloatBobPhase 4; // Set this to the same value for the base soul pickup and the spawn to sync their spawn positions
	}
	
	int sparktimer;
	int sparktimermax;
	int scaletimer;

	override void PostBeginPlay() // "invoker." is not needed in non-action functions
	{
		if (Owner == NULL) // Powerups cannot exist outside an inventory
		{
			A_StartSound("hellcore/spawnsoul", 36, CHANF_DEFAULT, 1.0, ATTN_NORM, frandom(0.75,1.25));
			sparktimermax = random(3,9) * 15;
			sparktimer = 0;
			if (dvdsdebug_hellcorepickups2) Console.Printf("(sparktimer): %d / %d", sparktimer, sparktimermax);
		}
		
		Super.PostBeginPlay();
	}
	
	override void Tick() // "invoker." is not needed in non-action functions
	{
		if (Owner == NULL) // Powerups cannot exist outside an inventory
		{
			sparktimer++;
			if (sparktimer >= sparktimermax)
			{
				A_StartSound("hellcore/slspark", 31, CHANF_DEFAULT, 1.0, ATTN_NORM, frandom(0.75,1.25));
				sparktimermax = random(3,9) * 15;
				sparktimer = 0;
				A_SpawnItemEx("HellSoulSpark",0.0,0.0,0.0,0.0,0.0,0.0,0.0,SXF_SETTARGET);
			}
			if (dvdsdebug_hellcorepickups2) Console.Printf("sparktimer: %d / %d", sparktimer, sparktimermax);
			
			if (bDROPPED)
			{
			}
		}
		
		Super.Tick();
	}

	action void A_HellCorePickupSound()
	{
		A_StartSound("pickuphellcore1", 34, CHANF_DEFAULT, frandom(0.875,1.5), ATTN_NORM, frandom(0.75,1.25));
		A_StartSound("pickuphellcore2", 35, CHANF_DEFAULT, frandom(0.875,1.5), ATTN_NORM, frandom(0.75,1.25));
		A_StartSound("pickuphellcore3", 36, CHANF_DEFAULT, frandom(0.875,1.5), ATTN_NORM, frandom(0.75,1.25));
	}

	action void A_HellCoreSoulPickupPulse(double xsc = 1.0, double ysc = 1.0)
	{
		invoker.scaletimer++;
		if (invoker.scaletimer > 39) { invoker.scaletimer = 0; }
		if (invoker.scaletimer == 0) { scale.x = scale.y = 0.125; }
		if (invoker.scaletimer == 1 || invoker.scaletimer == 39) { scale.x = scale.y = 0.12625; }
		if (invoker.scaletimer == 2 || invoker.scaletimer == 38) { scale.x = scale.y = 0.1275; }
		if (invoker.scaletimer == 3 || invoker.scaletimer == 37) { scale.x = scale.y = 0.12875; }
		if (invoker.scaletimer == 4 || invoker.scaletimer == 36) { scale.x = scale.y = 0.13; }
		if (invoker.scaletimer == 5 || invoker.scaletimer == 35) { scale.x = scale.y = 0.13125; }
		if (invoker.scaletimer == 6 || invoker.scaletimer == 34) { scale.x = scale.y = 0.1325; }
		if (invoker.scaletimer == 7 || invoker.scaletimer == 33) { scale.x = scale.y = 0.13375; }
		if (invoker.scaletimer == 8 || invoker.scaletimer == 32) { scale.x = scale.y = 0.135; }
		if (invoker.scaletimer == 9 || invoker.scaletimer == 31) { scale.x = scale.y = 0.13625; }
		if (invoker.scaletimer == 10 || invoker.scaletimer == 30) { scale.x = scale.y = 0.1375; }
		if (invoker.scaletimer == 11 || invoker.scaletimer == 29) { scale.x = scale.y = 0.13875; }
		if (invoker.scaletimer == 12 || invoker.scaletimer == 28) { scale.x = scale.y = 0.14; }
		if (invoker.scaletimer == 13 || invoker.scaletimer == 27) { scale.x = scale.y = 0.14125; }
		if (invoker.scaletimer == 14 || invoker.scaletimer == 26) { scale.x = scale.y = 0.1425; }
		if (invoker.scaletimer == 15 || invoker.scaletimer == 25) { scale.x = scale.y = 0.14375; }
		if (invoker.scaletimer == 16 || invoker.scaletimer == 24) { scale.x = scale.y = 0.145; }
		if (invoker.scaletimer == 17 || invoker.scaletimer == 23) { scale.x = scale.y = 0.14625; }
		if (invoker.scaletimer == 18 || invoker.scaletimer == 22) { scale.x = scale.y = 0.1475; }
		if (invoker.scaletimer == 19 || invoker.scaletimer == 21) { scale.x = scale.y = 0.14875; }
		if (invoker.scaletimer == 20) { scale.x = scale.y = 0.15; }
		scale.x *= xsc;
		scale.y *= ysc;

		if (dvdsdebug_hellcorepickups1) Console.Printf("(sc-x): %8f, (sc-y): %8f", scale.x, scale.y, alpha, floatbobphase);
	}
	
}
class HellSoulSpark : AetheriusBaseZSC
{
	Default
	{
		Scale 0.125;
		RenderStyle "Add";
		Alpha 0.75;
		+FLOATBOB;
		+DONTGIB;
		FloatBobPhase 4; // Set this to the same value for the base soul pickup and the spawn to sync their spawn positions
	}

	override void Tick()
	{
		if (target)
		{
			double rand = frandom(0.90,1.10);
			scale.x = (target.scale.x * rand);
			scale.y = (target.scale.y * rand);
			double rand2 = frandom(0.75,1.25);
			alpha = (target.alpha * (0.5 * rand2));
			floatbobphase = target.floatbobphase;
			A_Warp(AAPTR_TARGET,0.0,0.0,0.0,0.0,WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE);
			
			if (dvdsdebug_hellcorepickups1) Console.Printf("sc-x: %8f, sc-y: %8f, alpha: %8f, fbp: %d", scale.x, scale.y, alpha, floatbobphase);
		}

		super.Tick();
	}
	
	States
	{
		Spawn:
			HCSS ABCDEFEDCBA 1 bright;
			stop;
	}
}


class BaseHellcoreWeapon : QuickMeleeWeaponZSC
{
	double soulbobxbasex;
	double soulbobxrandxmin;
	double soulbobxrandxmax;
	double soulbobxetimemulmin;
	double soulbobxetimemulmax;
	double soulbobxspeedmod;
	double soulbobxheightmodmin;
	double soulbobxheightmodmax;

	double soulbobybasey;
	double soulbobyrandymin;
	double soulbobyrandymax;
	double soulbobyspeedmod;
	double soulbobyheightmodmin;
	double soulbobyheightmodmax;

	double soulbobx;
	double soulboby;
	
	double baseangle;

	int shotsfired;
	int bruiseraltdirection;
	int crisisatkresult;
	int sndtime, sndtimemax;
	string randsnd1, randsnd2, randsnd3, randsnd4, randsnd5, randsnd6, randsnd7, randsnd8;
	int randsoundsel;
	string chosensnd;
	int shaketimer;
	double shakefactor;
	int soulleveltime;

	property bobxbasex: soulbobxbasex;
	property bobxrandx: soulbobxrandxmin, soulbobxrandxmax;
	property bobxetimemul: soulbobxetimemulmin, soulbobxetimemulmax;
	property bobxspeedmod: soulbobxspeedmod;
	property bobxheightmod: soulbobxheightmodmin, soulbobxheightmodmax;

	property bobybasey: soulbobybasey;
	property bobyrandy: soulbobyrandymin, soulbobyrandymax;
	property bobyspeedmod: soulbobyspeedmod;
	property bobyheightmod: soulbobyheightmodmin, soulbobyheightmodmax;

	property randomsounds: randsnd1, randsnd2, randsnd3, randsnd4, randsnd5, randsnd6, randsnd7, randsnd8;

	Default
	{
		Scale 0.125;
		+FLOATBOB;
		+DONTGIB;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOAUTOAIM;
		+WEAPON.NOALERT;
		Weapon.BobRangeX 0.1;
		Weapon.BobRangeY 0.1;
		Weapon.BobSpeed 0.1;
		Weapon.BobStyle "Smooth";

		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx 0.0, 0.0;
		BaseHellcoreWeapon.bobxetimemul 0.2475, 0.2525;
		BaseHellcoreWeapon.bobxspeedmod 1.0;
		BaseHellcoreWeapon.bobxheightmod 4.875, 5.125;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy 0.0, 0.0;
		BaseHellcoreWeapon.bobyspeedmod 8.0;
		BaseHellcoreWeapon.bobyheightmod 8.0, 8.0;

		BaseHellcoreWeapon.randomsounds "", "", "", "", "", "", "", "";
	}
	
	action void A_HellSoulVileChase()
	{
		A_Chase(null,null,CHF_DONTMOVE|CHF_NOPLAYACTIVE|CHF_NORANDOMTURN|CHF_NOPOSTATTACKTURN|CHF_NODIRECTIONTURN); // A_VileChase();
	}
	
	action void A_HellSoulOverlayReady()
	{
		A_Overlay(4,"SoulUnderLayer",true);
		A_Overlay(5,"SoulImage",true);
		A_Overlay(6,"SoulOverLayer",true);
		A_Overlay(-63,"LayerFloatControl",true);
	}
	
	action void A_HellSoulClearOverlays()
	{
		A_Overlay(4,"EndLayerSound",false);
		A_Overlay(5,"EndLayer",false);
		A_Overlay(6,"EndLayer",false);
		A_Overlay(-63,"EndLayer",false);
	}
	
	action void A_HellSoulSpark()
	{
		A_Overlay(3,"SoulSparkUnder",false);
		A_Overlay(7,"SoulSparkUnder",false);
		if (random(1,8) <= 5)
		{ 
			invoker.shaketimer = random(1,4) * -5;
			if (dvdsdebug_hellcorepickups2) Console.Printf("shaketimer: %d", invoker.shaketimer);
		}
	}
	
	action void A_HellSoulCrisisCheck()
	{
		invoker.crisisatkresult = A_HellCoreCrisisCheck();
	}
	
	action void A_HellSoulFire1(string sndname = "", int heatamt = 0, string name1 = "", string name2 = "", int checknum = 0, bool usetension = true, bool hurtplayeroh = true, double altangle = 0.0, int spawnheight = 0, double spawnoffset = 0.0, double altpitch = 0.0)
	{
		A_StartSound(sndname,101);
		A_IncreaseHellcoreHeat(heatamt,hurtplayeroh); // +1.0% Hellcore Heat, Deal Damage if already above 100% Heat
		if (usetension) CallACS("StartTensionCountDown");

		A_SetAngle(angle-altangle);
		if (invoker.crisisatkresult > 0)
		{
			A_PlayCrisisAtkSound();
			A_SpreadAuraFireProjectile(name2,0,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch); 
			if (CallACS("MiscVarCheckDECORATE",checknum) >= 4) 
			{
				A_SpreadAuraFireProjectile(name2,0-15,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch);
				A_SpreadAuraFireProjectile(name2,0+15,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch);
			}
			if (CallACS("MiscVarCheckDECORATE",checknum) >= 7) 
			{
				A_SpreadAuraFireProjectile(name2,0-30,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch);
				A_SpreadAuraFireProjectile(name2,0+30,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch);
			}
		}
		else
		{
			A_SpreadAuraFireProjectile(name1,0,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch); 
			if (CallACS("MiscVarCheckDECORATE",checknum) >= 4) 
			{
				A_SpreadAuraFireProjectile(name1,0-15,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch);
				A_SpreadAuraFireProjectile(name1,0+15,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch);
			}
			if (CallACS("MiscVarCheckDECORATE",checknum) >= 7) 
			{
				A_SpreadAuraFireProjectile(name1,0-30,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch);
				A_SpreadAuraFireProjectile(name1,0+30,0,"",0+spawnoffset,0+spawnheight,0,0+altpitch);
			}
		}
		A_SetAngle(angle+altangle);
	}

	action void A_HellSoulFire2(string sndname = "", int heatamt = 0, string name1 = "DIPuff-Soul", int checknum = 0, bool usetension = true, bool hurtplayeroh = true)
	{
		A_StartSound(sndname,101);
		A_IncreaseHellcoreHeat(heatamt,hurtplayeroh); // +6.0% Hellcore Heat, Deal Damage if already above 100% Heat
		if (usetension) CallACS("StartTensionCountDown");

		if (A_HellCoreCrisisCheck() > 0)
		{
			A_PlayCrisisAtkSound();
			A_SpreadAuraFireBullets(30,0,10,(random(1,3)*3)*CallACS("CrisisMultiplier"),name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
			if (CallACS("MiscVarCheckDECORATE",checknum) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireBullets(30,0,10,(random(1,3)*3)*CallACS("CrisisMultiplier"),name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
				A_SetAngle(angle+30);
				A_SpreadAuraFireBullets(30,0,10,(random(1,3)*3)*CallACS("CrisisMultiplier"),name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",checknum) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireBullets(30,0,10,(random(1,3)*3)*CallACS("CrisisMultiplier"),name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
				A_SetAngle(angle+60);
				A_SpreadAuraFireBullets(30,0,10,(random(1,3)*3)*CallACS("CrisisMultiplier"),name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
				A_SetAngle(angle-30);
			}
		}
		else
		{
			A_SpreadAuraFireBullets(30,0,10,random(1,3)*3,name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
			if (CallACS("MiscVarCheckDECORATE",checknum) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireBullets(30,0,10,random(1,3)*3,name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
				A_SetAngle(angle+30);
				A_SpreadAuraFireBullets(30,0,10,random(1,3)*3,name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",checknum) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireBullets(30,0,10,random(1,3)*3,name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
				A_SetAngle(angle+60);
				A_SpreadAuraFireBullets(30,0,10,random(1,3)*3,name1,FBF_NORANDOM|FBF_NORANDOMPUFFZ,FBF_NORANDOM|FBF_NORANDOMPUFFZ,16384,"",0,0,2,"Cell");
				A_SetAngle(angle-30);
			}
		}
	}

	action void A_HellSoulHEleSpawn(string actorname = "FHadesSphere", int valcheck = 111, int heatamt = 0, double angmult = 45.0, double xvel = 8.0)
	{
		A_IncreaseHellcoreHeat(heatamt,1);
		A_SpreadAuraSpawnItemEx(actorname,32.0,0.0,32.0,xvel,0.0,0.0,0.0,SXF_TRANSFERPITCH);
		if (CallACS("MiscVarCheckDECORATE",valcheck) >= 4) 
		{
			A_SetAngle(angle-(angmult*1));
			A_SpreadAuraSpawnItemEx(actorname,32.0,0.0,32.0,xvel,0.0,0.0,0.0,SXF_TRANSFERPITCH);
			A_SetAngle(angle+(angmult*2));
			A_SpreadAuraSpawnItemEx(actorname,32.0,0.0,32.0,xvel,0.0,0.0,0.0,SXF_TRANSFERPITCH);
			A_SetAngle(angle-(angmult*1));
		}
		if (CallACS("MiscVarCheckDECORATE",valcheck) >= 7) 
		{
			A_SetAngle(angle-(angmult*2));
			A_SpreadAuraSpawnItemEx(actorname,32.0,0.0,32.0,xvel,0.0,0.0,0.0,SXF_TRANSFERPITCH);
			A_SetAngle(angle+(angmult*4));
			A_SpreadAuraSpawnItemEx(actorname,32.0,0.0,32.0,xvel,0.0,0.0,0.0,SXF_TRANSFERPITCH);
			A_SetAngle(angle-(angmult*2));
		}
	}
	
	States
	{
		// Dummy Sprites
		Dummy:
			HCL1 ABCDEFGHIJKLMNOPQRSTUV 0 bright;
			HCL2 AB 0 bright;
			HCL3 ABCDEFGHIJKLMNOPQ 0 bright;

		// Bonus Layers
		SoulOverLayer: // Layer 6
			HCL2 A 0 bright
			{ 
				A_OverlayFlags(6, PSPF_ALPHA, true); 
				A_OverlayFlags(6, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(6, STYLE_Translucent); 
			}
			HCL2 A 1 bright { A_OverlayAlpha(6, 0.125); }
			HCL2 A 1 bright { A_OverlayAlpha(6, 0.25); }
			HCL2 A 1 bright { A_OverlayAlpha(6, 0.375); }
			HCL2 A 1 bright { A_OverlayAlpha(6, 0.5); }
			HCL2 A 1 bright { A_OverlayAlpha(6, 0.625); }
			HCL2 A 1 bright { A_OverlayAlpha(6, 0.75); }
			HCL2 A 1 bright { A_OverlayAlpha(6, 0.875); }
			HCL2 A 1 bright { A_OverlayAlpha(6, 1.0); }
		SoulOverLayer2: // Layer 6
			HCL2 A 1 bright;
			loop;
		SoulUnderLayer: // Layer 4
			HCL2 B 0 bright 
			{ 
				A_StartSound("hellcore/slspawn", 32, CHANF_DEFAULT, frandom(0.75,1.25), ATTN_NORM, frandom(1.25,1.75));
				A_OverlayFlags(4, PSPF_ALPHA, true); 
				A_OverlayFlags(4, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(4, STYLE_Translucent); 
			}
			HCL2 B 1 bright { A_OverlayAlpha(4, 0.125); }
			HCL2 B 1 bright { A_OverlayAlpha(4, 0.25); }
			HCL2 B 1 bright { A_OverlayAlpha(4, 0.375); }
			HCL2 B 1 bright { A_OverlayAlpha(4, 0.5); }
			HCL2 B 1 bright { A_OverlayAlpha(4, 0.625); }
			HCL2 B 1 bright { A_OverlayAlpha(4, 0.75); }
			HCL2 B 1 bright { A_OverlayAlpha(4, 0.875); }
			HCL2 B 1 bright { A_OverlayAlpha(4, 1.0); }
		SoulUnderLayer2: // Layer 4
			HCL2 B 1 bright;
			loop;

		SoulImage: // Layer 5
			HCL3 A 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;

		SoulSparkOver: // 7
			HCL4 ABCDEFEDCBA 1 bright
			{
				A_OverlayFlags(7, PSPF_ALPHA, true); 
				A_OverlayFlags(7, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(7, STYLE_Translucent); 
				A_OverlayAlpha(7, 0.5);
			}
			stop;

		SoulSparkUnder: // Layer 3
			HCL4 ABCDEFEDCBA 1 bright
			{
				A_OverlayFlags(3, PSPF_ALPHA, true); 
				A_OverlayFlags(3, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(3, STYLE_Translucent); 
				A_OverlayAlpha(3, 0.5);
			}
			stop;
		EndLayer:
			TNT1 A 0;
			stop;
		EndLayerSound:
			TNT1 A 0
			{
				A_StartSound("hellcore/sluspaw", 33, CHANF_DEFAULT, frandom(0.75,1.25), ATTN_NORM, frandom(1.25,1.75));
			}
			stop;
		// Contols the Float/Bobbing of the Soul itself
		LayerFloatControl: // layer -63
			TNT1 A 1
			{
				if (CallACS("MenuVarCheckDECORATE",0) == 0) { invoker.soulleveltime = level.time; }
				if (invoker.shaketimer > 0) 
				{
					invoker.shakefactor = 0.25;
					invoker.soulbobx = invoker.soulbobxbasex  +  frandom(invoker.soulbobxrandxmin-(invoker.soulbobxrandxmin*(invoker.shakefactor)),invoker.soulbobxrandxmax+(invoker.soulbobxrandxmax*(invoker.shakefactor)))  +  (sin ((level.time + (level.time * frandom(invoker.soulbobxetimemulmin-(invoker.soulbobxetimemulmin*(invoker.shakefactor)),invoker.soulbobxetimemulmax+(invoker.soulbobxetimemulmax*(invoker.shakefactor))))) * invoker.soulbobxspeedmod+(invoker.soulbobxspeedmod*(invoker.shakefactor))) * frandom(invoker.soulbobxheightmodmin-(invoker.soulbobxheightmodmin*(invoker.shakefactor)),invoker.soulbobxheightmodmax+(invoker.soulbobxheightmodmax*(invoker.shakefactor))));
					invoker.soulboby = invoker.soulbobybasey  +  frandom(invoker.soulbobyrandymin-(invoker.soulbobyrandymin*(invoker.shakefactor)),invoker.soulbobyrandymax+(invoker.soulbobyrandymax*(invoker.shakefactor)))  +  (sin (level.time * invoker.soulbobyspeedmod+(invoker.soulbobyspeedmod*(invoker.shakefactor))) * frandom(invoker.soulbobyheightmodmin-(invoker.soulbobyheightmodmin*(invoker.shakefactor)),invoker.soulbobyheightmodmax+(invoker.soulbobyheightmodmax*(invoker.shakefactor))));

					if (CallACS("MenuVarCheckDECORATE",0) == 0) { invoker.shaketimer--; }
					if (dvdsdebug_hellcorepickups2) Console.Printf("shaketimer: %d", invoker.shaketimer);
				}
				else
				if (invoker.shaketimer < 0) 
				{
					invoker.shakefactor = 0.5;
					invoker.soulbobx = invoker.soulbobxbasex  +  frandom(invoker.soulbobxrandxmin-(invoker.soulbobxrandxmin*(invoker.shakefactor)),invoker.soulbobxrandxmax+(invoker.soulbobxrandxmax*(invoker.shakefactor)))  +  (sin ((level.time + (level.time * frandom(invoker.soulbobxetimemulmin-(invoker.soulbobxetimemulmin*(invoker.shakefactor)),invoker.soulbobxetimemulmax+(invoker.soulbobxetimemulmax*(invoker.shakefactor))))) * invoker.soulbobxspeedmod+(invoker.soulbobxspeedmod*(invoker.shakefactor))) * frandom(invoker.soulbobxheightmodmin-(invoker.soulbobxheightmodmin*(invoker.shakefactor)),invoker.soulbobxheightmodmax+(invoker.soulbobxheightmodmax*(invoker.shakefactor))));
					invoker.soulboby = invoker.soulbobybasey  +  frandom(invoker.soulbobyrandymin-(invoker.soulbobyrandymin*(invoker.shakefactor)),invoker.soulbobyrandymax+(invoker.soulbobyrandymax*(invoker.shakefactor)))  +  (sin (level.time * invoker.soulbobyspeedmod+(invoker.soulbobyspeedmod*(invoker.shakefactor))) * frandom(invoker.soulbobyheightmodmin-(invoker.soulbobyheightmodmin*(invoker.shakefactor)),invoker.soulbobyheightmodmax+(invoker.soulbobyheightmodmax*(invoker.shakefactor))));

					if (CallACS("MenuVarCheckDECORATE",0) == 0) { invoker.shaketimer++; }
					if (dvdsdebug_hellcorepickups2) Console.Printf("shaketimer: %d", invoker.shaketimer);
				}
				else
				{
					invoker.soulbobx = invoker.soulbobxbasex + frandom(invoker.soulbobxrandxmin,invoker.soulbobxrandxmax) + (sin ((invoker.soulleveltime + (invoker.soulleveltime * frandom(invoker.soulbobxetimemulmin,invoker.soulbobxetimemulmax))) * invoker.soulbobxspeedmod) * frandom(invoker.soulbobxheightmodmin,invoker.soulbobxheightmodmax));
					invoker.soulboby = invoker.soulbobybasey + frandom(invoker.soulbobyrandymin,invoker.soulbobyrandymax) + (sin (invoker.soulleveltime * invoker.soulbobyspeedmod) * frandom(invoker.soulbobyheightmodmin,invoker.soulbobyheightmodmax));
				}
				if (dvdsdebug_hellcorepickups1) 
				{
					Console.Printf("soulbobx: %8f, xbasex: %2f, xrandx: %2f-%2f, xetimemul: %2f-%2f, xspeedmod: %2f, xheightmod: %2f-%2f", invoker.soulbobx, invoker.soulbobxbasex, invoker.soulbobxrandxmin, invoker.soulbobxrandxmax, invoker.soulbobxetimemulmin, invoker.soulbobxetimemulmax, invoker.soulbobxspeedmod, invoker.soulbobxheightmodmin, invoker.soulbobxheightmodmax);
					Console.Printf("soulboby: %8f, ybasey: %2f, yrandy: %2f-%2f, yspeedmod: %2f, yheightmod: %2f-%2f", invoker.soulboby, invoker.soulbobybasey, invoker.soulbobyrandymin, invoker.soulbobyrandymax, invoker.soulbobyspeedmod, invoker.soulbobyheightmodmin, invoker.soulbobyheightmodmax);
				}

				if (CallACS("MenuVarCheckDECORATE",0) == 0) 
				{
					// A_OverlayOffset (<layer>, 0, 32 + (sin (level.time * <speed modifier>) * <height modifier>), WOF_INTERPOLATE)
					A_OverlayOffset(3, invoker.soulbobx, invoker.soulboby, WOF_INTERPOLATE);
					A_OverlayOffset(4, invoker.soulbobx, invoker.soulboby, WOF_INTERPOLATE);
					A_OverlayOffset(5, invoker.soulbobx, invoker.soulboby, WOF_INTERPOLATE);
					A_OverlayOffset(6, invoker.soulbobx, invoker.soulboby, WOF_INTERPOLATE);
					A_OverlayOffset(7, invoker.soulbobx, invoker.soulboby, WOF_INTERPOLATE);
				}

				if (dvds_florahellcoresoulstype) 
				{
					if (invoker.sndtimemax <= 0) { invoker.sndtimemax = random(5,15) * 35; }
					if (CallACS("MenuVarCheckDECORATE",0) == 0) { invoker.sndtime++; }
					if (invoker.sndtime >= invoker.sndtimemax)
					{
						invoker.randsoundsel = random(1,8);
						if (invoker.randsoundsel == 1) { invoker.chosensnd = invoker.randsnd1; }
						if (invoker.randsoundsel == 2) { invoker.chosensnd = invoker.randsnd2; }
						if (invoker.randsoundsel == 3) { invoker.chosensnd = invoker.randsnd3; }
						if (invoker.randsoundsel == 4) { invoker.chosensnd = invoker.randsnd4; }
						if (invoker.randsoundsel == 5) { invoker.chosensnd = invoker.randsnd5; }
						if (invoker.randsoundsel == 6) { invoker.chosensnd = invoker.randsnd6; }
						if (invoker.randsoundsel == 7) { invoker.chosensnd = invoker.randsnd7; }
						if (invoker.randsoundsel == 8) { invoker.chosensnd = invoker.randsnd8; }
						A_StartSound(invoker.chosensnd, 31, CHANF_DEFAULT, frandom(0.375,0.875), ATTN_NORM, frandom(0.75,1.25));
						invoker.sndtimemax = random(5,15) * 35;
						invoker.sndtime = 0;
						if (dvdsdebug_hellcorepickups1) Console.Printf("chosensnd: '%s' (%d)", invoker.chosensnd, invoker.randsoundsel);
	
						invoker.shaketimer = random(1,3) * 35;
					}
					if (dvdsdebug_hellcorepickups2) Console.Printf("sndtime: %d / %d", invoker.sndtime, invoker.sndtimemax);
				}
				
			}
			loop;

		Ready:
			HCL1 B 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			loop;
		Deselect: 
			HCL1 A 1
			{
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 G 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 K 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;

		// Quick Kick
		User1: // Kick - Most Weapons
			TNT1 A 0 
			{
				A_Overlay(-2,"Kick",true);
			}
			goto Ready;

		Kick:
			TNT1 A 0
			{
				if (A_UseStaminaAttack(A_GetKickStaminaUse(0),2) == 0) { return resolvestate("KickEnd"); }
				return resolvestate(null); 
			}
			TNT1 A 0
			{
				A_GunFlash("LightDone",GFF_NOEXTCHANGE); // A_ClearFlash;
				if (random(1,256) >= 253)
				{
					if (CountInv("PlayingStrife",AAPTR_PLAYER1) > 0) { } // Strife mode makes the punch work like the Punch Dagger where it NEVER makes sound
					else { A_AlertMonsters(); } // Sometimes a swing will be enough to wake up all monsters in the area.
				}
				CallACS("StartTensionCountDown");
				if (CallACS("MiscVarCheckDECORATE",10035) >= 5) { A_GiveInventory("KickAttackDEFLvl2",1); } else { A_GiveInventory("KickAttackDEFLvl1",1); }
				A_SetMartialArtsMastery(1);
				if (random(1,256) > 64) { A_GiveInventory("KickCritBonus1",1,AAPTR_PLAYER1); } else { A_GiveInventory("KickCritBonus2",1,AAPTR_PLAYER1); }
				A_GiveInventory("UsingMeleeAttack",1);
			}
			goto KickStart;
		KickStart: // 15 Tics (7 (MAMlv3), 3 (MAMlv5))
			FKIC A 1 
			{
				A_SceptreShieldOff();
				CallACS("MiscVarSetDECORATE",397,0);
				if (CallACS("MiscVarCheckDECORATE",10035) >= 3) // -1
				{
					A_SetTics(0); 
				}
			}
			FKIC B 1
			{
				if (CallACS("MiscVarCheckDECORATE",10035) >= 5) // -1
				{
					A_SetTics(0); 
				} 
				else
				{
					if (A_WeaponCheckDoubleFireRate() > 0)
					{
						A_SetTics(0); 
					}
				}
				if (CallACS("MiscVarCheckDECORATE",10035) >= 3) { A_StartSound("fistswingheavy0",1); } else { A_StartSound("fistswingmedium0",1); }
			}
			FKIC C 1 
			{
				if (CallACS("MiscVarCheckDECORATE",10035) >= 3) 
				{ 
					A_SetTics(0); 
				}

				if (GetCVar("dvds_florahokutolol") > 0 && CallACS("MiscVarCheckDECORATE",10035) >= 4)
				{
					if (random(1,256) >= 1) { A_StartSound("FloraHokutoLol",CHAN_VOICE); }
				}
				else
				{
					if (random(1,256) >= (128 + (CallACS("MiscVarCheckDECORATE",10035)) * 10)) { A_StopSound(CHAN_VOICE); A_StartSound("FloraKiaiFull",CHAN_VOICE); } 
				}
			}
			FKIC D 1 
			{
				if (CallACS("MiscVarCheckDECORATE",10035) == 2 || CallACS("MiscVarCheckDECORATE",10035) == 4) 
				{
					A_SetTics(0); 
				}
				else
				{
					if (A_WeaponCheckDoubleFireRate() > 0)
					{
						A_SetTics(0); 
					}
				}
			}
			FKIC E 1
			{ 
				if (CallACS("MiscVarCheckDECORATE",10035) >= 3) 
				{
					A_SetTics(0); 
				} 
			}
			FKIC F 1
			{ 
				if (CallACS("MiscVarCheckDECORATE",10035) >= 5) 
				{
					A_SetTics(0); 
				} 
				else
				{
					if (A_WeaponCheckDoubleFireRate() > 0)
					{
						A_SetTics(0); 
					}
				}
			}
			FKIC G 1 
			{ 
				if (CallACS("MiscVarCheckDECORATE",10035) >= 3) 
				{
					A_SetTics(0); 
				} 
			}
			FKIC H 1
			{
				A_GetKickSwingRecoil(0);
				A_SpreadAuraCustomPunch(A_GetKickDamage(0),1,CPF_NOTURN,"KickPuff",A_GetMeleeRange(4),0,0,"","","");
	
				if (A_CheckMeleeDestroyProj(0) > 0)
				{
					if (CallACS("MiscVarCheckDECORATE",10035) >= 5)
					{
						if (random(1,8) <= 3)
						{
							A_MeleeShieldPiece("ShieldPartPunchAttackReflect",33,24);
							A_MeleeShieldPiece("ShieldPartPunchAttackReflect",33,56);
							A_MeleeShieldPiece("ShieldPartPunchAttackReflect",33,88);
						}
						else
						{
							A_MeleeShieldPiece("ShieldPartPunchAttackNoReflect",33,24);
							A_MeleeShieldPiece("ShieldPartPunchAttackNoReflect",33,56);
							A_MeleeShieldPiece("ShieldPartPunchAttackNoReflect",33,88);
						}
					}
					else
					{
						if (random(1,8) <= 1)
						{
							A_MeleeShieldPiece("ShieldPartPunchAttackReflect",33,24);
							A_MeleeShieldPiece("ShieldPartPunchAttackReflect",33,56);
							A_MeleeShieldPiece("ShieldPartPunchAttackReflect",33,88);
						}
						else
						{
							A_MeleeShieldPiece("ShieldPartPunchAttackNoReflect",33,24);
							A_MeleeShieldPiece("ShieldPartPunchAttackNoReflect",33,56);
							A_MeleeShieldPiece("ShieldPartPunchAttackNoReflect",33,88);
						}
					}
				}
			}
			FKIC G 1 
			{ 
				if (CallACS("MiscVarCheckDECORATE",10035) >= 3) 
				{
					A_SetTics(0); 
				} 
			}
			FKIC F 1
			{ 
				if (CallACS("MiscVarCheckDECORATE",10035) >= 5) 
				{
					A_SetTics(0); 
				} 
				else
				{
					if (A_WeaponCheckDoubleFireRate() > 0)
					{
						A_SetTics(0); 
					}
				}
			}
			FKIC E 1
			{ 
				if (CallACS("MiscVarCheckDECORATE",10035) >= 3) 
				{
					A_SetTics(0); 
				} 
			}
			FKIC D 1 
			{
				if ((CallACS("MiscVarCheckDECORATE",10035) >= 1 && CallACS("MiscVarCheckDECORATE",10035) <= 2) || CallACS("MiscVarCheckDECORATE",10035) == 4) 
				{ 
					A_SetTics(0); 
				} 
				else
				{
					if (A_WeaponCheckDoubleFireRate() > 0)
					{
						A_SetTics(0); 
					}
				}
			}
			FKIC C 1 
			{
				if (CallACS("MiscVarCheckDECORATE",10035) >= 3) // -1
				{
					A_SetTics(0); 
				}
			}
			FKIC B 1 
			{
				if (CallACS("MiscVarCheckDECORATE",10035) >= 5) // -1
				{
					A_SetTics(0); 
				} 
				else
				{
					if (A_WeaponCheckDoubleFireRate() > 0)
					{
						A_SetTics(0); 
					}
				}
			}
			FKIC A 1 
			{
				if (CallACS("MiscVarCheckDECORATE",10035) >= 3) // -1
				{
					A_SetTics(0); 
				}
			}
		// KICK END
		KickEnd:
			TNT1 A 0
			{
				A_KickBonusOff();
				A_SetMartialArtsMastery(0);
			}
			stop;
			
/*
		// Alt Fire
		AltFire:
			HCL1 MN 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 N 0
			{
				if (random(1,2) == 1) { return resolvestate("AltFire2"); }
				else { return resolvestate("AltFire1"); }
				return resolvestate(null);
			}
		AltFire1:
			HCL1 O 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim1:
			HCL1 P 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 Q 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

			}
			HCL1 R 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 O 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim1"); }
				else { A_Refire("AltReFireAnim2"); }
			}
			HCL1 O 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFire2:
			HCL1 S 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim2:
			HCL1 T 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 U 4 bright 
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

			}
			HCL1 V 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 S 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim2"); }
				else { A_Refire("AltReFireAnim1"); }
			}
			HCL1 S 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFireEnd:
			HCL1 NM 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
*/
	}
}

class ImpSoulCI : BaseHellcorePickup //32222
{
	Default
	{
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//$Sprite "HCSLA0"
		Tag "Imp's Soul: [Hellcore] Launches Imp Fireballs";
		Inventory.PickupMessage "You got an Imp's Soul! \cx[Slot 4]\c-";
	}

	States
	{
		Spawn:
			HCSL A 1 bright 
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(0);
			}
			Loop;

		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("ImpSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(1);
			}
			Stop;
	}
}

// Imp Soul [Slot 4] (Weapon)
class ImpSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLA0"
		+FLOATBOB;
		+DONTGIB;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOAUTOAIM;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got an Imp's Soul! \cx[Slot 4]\c-";
		Tag "Imp's Soul";

		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -0.25, 0.25;
		BaseHellcoreWeapon.bobxetimemul 0.245, 0.275;
		BaseHellcoreWeapon.bobxspeedmod 1.1;
		BaseHellcoreWeapon.bobxheightmod 4.875, 5.125;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.125, 0.125;
		BaseHellcoreWeapon.bobyspeedmod 8.0;
		BaseHellcoreWeapon.bobyheightmod 8.0, 8.0;
		
		BaseHellcoreWeapon.randomsounds "imp/sight", "imp/pain", "imp/death", "imp/active", "imp/sight", "imp/pain", "imp/death", "imp/active";
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 A 0 bright 
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL A 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 G 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("imp/attack",100,"DoomImpBall-Soul","DoomImpBallCrisis-Soul",96,true,true);
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 K 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("imp/attack",100,"DoomImpBall-Soul","DoomImpBallCrisis-Soul",96,true,true);
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

class DarkImpSoulCI : BaseHellcorePickup //32223
{
	Default
	{
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//$Sprite "HCSLB0"
		Tag "Dark Imp's Soul: [Hellcore] Launches Dark Imp Fireballs";
		Inventory.PickupMessage "You got a Dark Imp's Soul! \cx[Slot 4]\c-";
	}
	States
	{
		Spawn:
			HCSL B 1 NoDelay bright 
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(1);
			}
			Loop;

		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("DarkImpSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(2);
			}
			Stop;
	}
}

// Dark Imp Soul [Slot 4] (Weapon)
class DarkImpSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLB0"
		+FLOATBOB;
		+DONTGIB;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOAUTOAIM;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Dark Imp's Soul! \cx[Slot 4]\c-";
		Tag "Dark Imp's Soul";

		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -0.5, 0.5;
		BaseHellcoreWeapon.bobxetimemul 0.24, 0.28;
		BaseHellcoreWeapon.bobxspeedmod 1.15;
		BaseHellcoreWeapon.bobxheightmod 4.85, 5.15;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.25, 0.25;
		BaseHellcoreWeapon.bobyspeedmod 8.0375;
		BaseHellcoreWeapon.bobyheightmod 7.92, 8.08;
		
		BaseHellcoreWeapon.randomsounds "darkimp/sight", "darkimp/pain", "darkimp/death", "darkimp/active", "darkimp/sight", "darkimp/pain", "darkimp/death", "darkimp/active";
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 B 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL B 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 G 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("imp/attack",250,"DarkSeeker-Soul","DarkSeekerCrisis-Soul",97,true,true);
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 K 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("imp/attack",250,"DarkSeeker-Soul","DarkSeekerCrisis-Soul",97,true,true);
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

// Cacodemon's Soul [Slot 4] (Weapon)
class CacodemonSoulCI : BaseHellcorePickup //32224
{
	Default
	{
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//$Sprite "HCSLC0"
		Tag "Cacodemon's Soul: [Hellcore] Launches Cacodemon Lightning Balls";
		Inventory.PickupMessage "You got a Cacodemon's Soul! \cx[Slot 4]\c-";
	}

	States
	{
		Spawn:
			HCSL C 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(2);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("CacodemonSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(3);
			}
			Stop;
	}
}

class CacodemonSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLC0"
		+FLOATBOB;
		+DONTGIB;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOAUTOAIM;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Cacodemon's Soul! \cx[Slot 4]\c-";
		Tag "Cacodemon's Soul";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -0.75, 0.75;
		BaseHellcoreWeapon.bobxetimemul 0.2375, 0.2625;
		BaseHellcoreWeapon.bobxspeedmod 1.175;
		BaseHellcoreWeapon.bobxheightmod 4.8, 5.2;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.375, 0.375;
		BaseHellcoreWeapon.bobyspeedmod 8.075;
		BaseHellcoreWeapon.bobyheightmod 7.75, 8.25;
		
		BaseHellcoreWeapon.randomsounds "caco/sight", "cacodemon/pain", "caco/death", "caco/active", "caco/sight", "cacodemon/pain", "caco/death", "caco/active";
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 C 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL C 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 G 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("caco/attack",150,"CacodemonBall-Soul","CacodemonBallCrisis-Soul",98,true,true);
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 K 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("caco/attack",150,"CacodemonBall-Soul","CacodemonBallCrisis-Soul",98,true,true);
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

// Cacolantern's Soul [Slot 4] (Weapon)
class CacolanternSoulCI : BaseHellcorePickup //32225
{
	Default
	{
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//$Sprite "HCSLD0"
		Tag "Cacolantern's Soul: [Hellcore] Launches Cacolantern Lightning Balls";
		Inventory.PickupMessage "You got a Cacolantern's Soul! \cx[Slot 4]\c-";
	}
	
	States
	{
		Spawn:
			HCSL D 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(3);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("CacolanternSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(4);
			}
			Stop;
	}
}

class CacolanternSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLD0"
		Tag "Cacolantern's Soul";
		+FLOATBOB;
		+DONTGIB;
		+WEAPON.NOAUTOAIM;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Cacolantern's Soul! \cx[Slot 4]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.0625, 1.0625;
		BaseHellcoreWeapon.bobxetimemul 0.235, 0.265;
		BaseHellcoreWeapon.bobxspeedmod 1.2;
		BaseHellcoreWeapon.bobxheightmod 4.68, 5.32;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.53125, 0.53125;
		BaseHellcoreWeapon.bobyspeedmod 8.1;
		BaseHellcoreWeapon.bobyheightmod 7.675, 8.325;
		
		BaseHellcoreWeapon.randomsounds "caco/sight", "cacodemon/pain", "caco/death", "caco/active", "caco/sight", "cacodemon/pain", "caco/death", "caco/active";
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 D 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL D 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 G 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("caco/attack",200,"CacolanternBall-Soul","CacolanternBallCrisis-Soul",99,true,true);
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 K 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("caco/attack",200,"CacolanternBall-Soul","CacolanternBallCrisis-Soul",99,true,true);
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

// Abaddon's Soul [Slot 4] (Weapon)
class AbaddonSoulCI : BaseHellcorePickup //32226
{
	Default
	{
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//$Sprite "HCSLE0"
		Tag "Abaddon's Soul: [Hellcore] Launches Abaddon Fireballs";
		Inventory.PickupMessage "You got the Abaddon's Soul! \cx[Slot 4]\c-";
	}

	States
	{
		Spawn:
			HCSL E 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(4);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("AbaddonSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(5);
			}
			Stop;
	}
}
class AbaddonSoul : BaseHellcoreWeapon
{
	Default
	{
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//$Sprite "HCSLE0"
		Tag "Abaddon's Soul";
		Inventory.PickupMessage "You got the Abaddon's Soul! \cx[Slot 4]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.1875, 1.1875;
		BaseHellcoreWeapon.bobxetimemul 0.2325, 0.2675;
		BaseHellcoreWeapon.bobxspeedmod 1.3;
		BaseHellcoreWeapon.bobxheightmod 4.68, 5.32;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.59375, 0.59375;
		BaseHellcoreWeapon.bobyspeedmod 8.3;
		BaseHellcoreWeapon.bobyheightmod 7.65, 8.35;
		
		BaseHellcoreWeapon.randomsounds "caco/sight", "cacodemon/pain", "caco/death", "caco/active", "caco/sight", "cacodemon/pain", "caco/death", "caco/active";
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 E 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL E 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				invoker.shotsfired = 0;
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 GG 2 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }

				invoker.shotsfired++;
				if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 2", invoker.shotsfired);
				if (invoker.shotsfired > 2) { invoker.shotsfired = 0; }
				if (invoker.shotsfired == 1) 
				{ 
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("caco/attack",125,"AbaddonBall-Soul","AbaddonBallCrisis-Soul",100,true,true); 
				}
				else 
				{ 
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("caco/attack",125,"AbaddonBall-Soul","AbaddonBallCrisis-Soul",100,true,false); 
				}
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				invoker.shotsfired = 0;
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 KK 2 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }

				invoker.shotsfired++;
				if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 2", invoker.shotsfired);
				if (invoker.shotsfired > 2) { invoker.shotsfired = 0; }
				if (invoker.shotsfired == 1) 
				{ 
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("caco/attack",125,"AbaddonBall-Soul","AbaddonBallCrisis-Soul",100,true,true); 
				}
				else 
				{ 
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("caco/attack",125,"AbaddonBall-Soul","AbaddonBallCrisis-Soul",100,true,false); 
				}
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}


// Hell Knight's Soul [Slot 5] (Weapon)
class KnightSoulCI : BaseHellcorePickup //32227
{
	Default
	{
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//$Sprite "HCSLF0"
		Tag "Hell Knight's Soul: [Hellcore] Launches Hell Knight Plasmaballs";
		Inventory.PickupMessage "You got a Hell Knight's Soul! \cx[Slot 5]\c-";
	}
	States
	{
		Spawn:
			HCSL F 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(5);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("KnightSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(6);
			}
			Stop;
	}
}
class KnightSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLF0"
		Tag "Hell Knight's Soul";
		+FLOATBOB;
		+DONTGIB;
		+WEAPON.NOAUTOAIM;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Hell Knight's Soul! \cx[Slot 5]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.0, 1.0;
		BaseHellcoreWeapon.bobxetimemul 0.235, 0.265;
		BaseHellcoreWeapon.bobxspeedmod 1.20;
		BaseHellcoreWeapon.bobxheightmod 4.75, 5.25;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.5, 0.5;
		BaseHellcoreWeapon.bobyspeedmod 8.125;
		BaseHellcoreWeapon.bobyheightmod 7.625, 8.375;
		
		BaseHellcoreWeapon.randomsounds "knight/sight", "knight/pain", "knight/death", "knight/active", "knight/sight", "knight/pain", "knight/death", "knight/active";
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 F 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL F 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 G 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("baron/attack",225,"HellKnightBall-Soul","HellKnightBallCrisis-Soul",101,true,true);
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 K 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("baron/attack",225,"HellKnightBall-Soul","HellKnightBallCrisis-Soul",101,true,true);
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

// Baron of Hell's Soul [Slot 5] (Weapon)
class BaronSoulCI : BaseHellcorePickup //32228
{
	Default
	{
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//$Sprite "HCSLG0"
		Tag "Baron of Hell's Soul: [Hellcore] Launches Baron of Hell Plasmaballs";
		Inventory.PickupMessage "You got a Baron of Hell's Soul! \cx[Slot 5]\c-";
	}
	States
	{
		Spawn:
			HCSL G 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(6);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("BaronSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(7);
			}
			Stop;
	}
}
class BaronSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLG0"
		Tag "Baron of Hell's Soul";
		+FLOATBOB;
		+DONTGIB;
		+WEAPON.NOAUTOAIM;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Baron of Hell's Soul! \cx[Slot 5]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.25, 1.25;
		BaseHellcoreWeapon.bobxetimemul 0.23125, 0.26875;
		BaseHellcoreWeapon.bobxspeedmod 1.50;
		BaseHellcoreWeapon.bobxheightmod 4.6875, 5.3125;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.625, 0.625;
		BaseHellcoreWeapon.bobyspeedmod 8.15625;
		BaseHellcoreWeapon.bobyheightmod 7.53125, 8.46875;
		
		BaseHellcoreWeapon.randomsounds "baron/sight", "baron/pain", "baron/death", "baron/active", "baron/sight", "baron/pain", "baron/death", "baron/active";
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 G 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL G 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 G 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("baron/attack",275,"BaronofHellBall-Soul","BaronofHellBallCrisis-Soul",102,true,true);
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 K 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_HellSoulCrisisCheck();
				A_HellSoulFire1("baron/attack",275,"BaronofHellBall-Soul","BaronofHellBallCrisis-Soul",102,true,true);
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

// Belphegor's Soul [Slot 5] (Weapon)
class BelphegorSoulCI : BaseHellcorePickup //32229
{
	Default
	{
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//$Sprite "HCSLH0"
		Tag "Belphegor's Soul: [Hellcore] Launches Belphegor Plasmaballs";
		Inventory.PickupMessage "You got a Belphegor's Soul! \cx[Slot 5]\c-";
	}
	States
	{
		Spawn:
			HCSL H 1 NoDelay bright 
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(7);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("BelphegorSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(8);
			}
			Stop;
	}
}

class BelphegorSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLH0"
		Tag "Belphegor's Soul";
		+FLOATBOB;
		+DONTGIB;
		+WEAPON.NOAUTOAIM;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Belphegor's Soul! \cx[Slot 5]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.5, 1.5;
		BaseHellcoreWeapon.bobxetimemul 0.2275, 0.2725;
		BaseHellcoreWeapon.bobxspeedmod 1.80;
		BaseHellcoreWeapon.bobxheightmod 4.625, 5.375;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.75, 0.75;
		BaseHellcoreWeapon.bobyspeedmod 8.1875;
		BaseHellcoreWeapon.bobyheightmod 7.4375, 8.5625;
		
		BaseHellcoreWeapon.randomsounds "baron/sight", "baron/pain", "baron/death", "baron/active", "baron/sight", "baron/pain", "baron/death", "baron/active";
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 H 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL H 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				invoker.shotsfired = 0;
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 GGGG 1 bright
			{
				invoker.shotsfired++;
				if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 4", invoker.shotsfired);
				if (invoker.shotsfired > 4) { invoker.shotsfired = 0; }
				if (invoker.shotsfired == 1) 
				{
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("baron/attack",125,"BelphegorBall-Soul","BelphegorBallCrisis-Soul",103,true,true); 
				}
				else 
				if (invoker.shotsfired == 2 || invoker.shotsfired == 3) 
				{ 
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("baron/attack",125,"BelphegorBall-Soul","BelphegorBallCrisis-Soul",103,true,false); 
				}
				else
				{
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) 
					{ 
						A_HellSoulCrisisCheck();
						A_HellSoulFire1("baron/attack",0,"BelphegorBall-Soul","BelphegorBallCrisis-Soul",103,true,false); 
					}
				}
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				invoker.shotsfired = 0;
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 KKKK 1 bright
			{
				invoker.shotsfired++;
				if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 4", invoker.shotsfired);
				if (invoker.shotsfired > 4) { invoker.shotsfired = 0; }
				if (invoker.shotsfired == 1) 
				{
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("baron/attack",125,"BelphegorBall-Soul","BelphegorBallCrisis-Soul",103,true,true); 
				}
				else 
				if (invoker.shotsfired == 2 || invoker.shotsfired == 3) 
				{ 
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("baron/attack",125,"BelphegorBall-Soul","BelphegorBallCrisis-Soul",103,true,false); 
				}
				else
				{
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) 
					{ 
						A_HellSoulCrisisCheck();
						A_HellSoulFire1("baron/attack",0,"BelphegorBall-Soul","BelphegorBallCrisis-Soul",103,true,false); 
					}
				}
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

// Bruiser Demon's Soul [Slot 5] (Weapon)
class BruiserSoulCI : BaseHellcorePickup //32230
{
	Default
	{
		//$Sprite "HCSLI0"
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		Tag "Bruiser Demon's Soul: [Hellcore] Uses Bruiser Demon attacks [alt-fire selects mode]";
		Inventory.PickupMessage "You got a Bruiser Demon's Soul! \cx[Slot 5]\c-";
	}

	States
	{
		Spawn:
			HCSL I 1 bright NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(8);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("BruiserSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(9);
			}
			Stop;
	}
}
class BruiserSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLI0"
		Tag "Bruiser Demon's Soul";
		+FLOATBOB;
		+DONTGIB;
		+WEAPON.NOAUTOAIM;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Bruiser Demon's Soul! \cx[Slot 5]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.75, 1.75;
		BaseHellcoreWeapon.bobxetimemul 0.22375, 0.27625;
		BaseHellcoreWeapon.bobxspeedmod 2.1;
		BaseHellcoreWeapon.bobxheightmod 4.5625, 5.4375;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.875, 0.875;
		BaseHellcoreWeapon.bobyspeedmod 8.21875;
		BaseHellcoreWeapon.bobyheightmod 7.34375, 8.65625;
		
		BaseHellcoreWeapon.randomsounds "superbaron/scream", "superbaron/pain", "superbaron/death", "superbaron/act", "superbaron/scream", "superbaron/pain", "superbaron/death", "superbaron/act";
	}
	

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 I 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL I 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady(WRF_ALLOWUSER4);
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				invoker.shotsfired = 0;
				if (CallACS("HellcoreFireMode",1,0) == 0) // If Alterating Fire Wave Mode is set
				{
					invoker.bruiseraltdirection = 0;
					if (random(1,2) == 1) { invoker.bruiseraltdirection = 1; }
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
				if (CallACS("HellcoreFireMode",1,0) == 1) // If Bruiser Blast Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,0) == 2) // If Ground Wave Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 GGGGGGG 1 bright
			{
				A_SetTics(0); 
				if (CallACS("HellcoreFireMode",1,0) == 0) // If Alterating Fire Wave Mode is set
				{
					A_SetTics(1);
					if (invoker.shotsfired == 0) { A_HellSoulCrisisCheck(); }
					invoker.baseangle = (-50 + (invoker.shotsfired * 10));
					if (invoker.bruiseraltdirection == 0) { invoker.baseangle *= 1; }
					if (invoker.bruiseraltdirection == 1) { invoker.baseangle *= -1; }
					invoker.shotsfired++;
					if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 7", invoker.shotsfired);
					if (dvdsdebug_hellcorepickups1) Console.Printf("baseangle: %8f", invoker.baseangle);
					if (invoker.shotsfired > 7) { invoker.shotsfired = 0; }
					if (invoker.shotsfired == 1) 
					{ 
						A_HellSoulSpark();
						A_HellSoulFire1("baron/attack",71,"BruiserBall2-Soul","BruiserBall2Crisis-Soul",104,true,true,invoker.baseangle);
					}
					else 
					{ 
						A_HellSoulFire1("",71,"BruiserBall2-Soul","BruiserBall2Crisis-Soul",104,true,false,invoker.baseangle);
					}
				}
			}
			HCL1 G 4 bright
			{
				A_SetTics(0); 
				if (CallACS("HellcoreFireMode",1,0) == 1) // If Bruiser Blast Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("baron/attack",400,"BruiserBall-Soul","BruiserBallCrisis-Soul",104,true,true,0.0);
				}
			}
			HCL1 GGGG 1 bright
			{
				A_SetTics(0);
				if (CallACS("HellcoreFireMode",1,0) == 2) // If Ground Wave Mode is set
				{
					A_SetTics(1);
					if (invoker.shotsfired == 0) { A_HellSoulCrisisCheck(); }
					invoker.shotsfired++;
					if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 4", invoker.shotsfired);
					if (invoker.shotsfired == 1)
					{
						A_HellSoulSpark();
						A_HellSoulFire1("",250,"BruiserFireSpawner-Soul","BruiserFireSpawnerCrisis-Soul",104,true,true,15.0);
					}
					else
					if (invoker.shotsfired == 2)
					{
						A_HellSoulFire1("",250,"BruiserFireSpawner-Soul","BruiserFireSpawnerCrisis-Soul",104,true,false,0.0);
					}
					else
					if (invoker.shotsfired == 3)
					{
						A_HellSoulCrisisCheck();
						A_HellSoulFire1("",250,"BruiserFireSpawner-Soul","BruiserFireSpawnerCrisis-Soul",104,true,false,-15.0);
					}
				}
			}
			HCL1 H 4 bright
			{
				if (CallACS("HellcoreFireMode",1,0) == 0) // If Alterating Fire Wave Mode is set
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
				if (CallACS("HellcoreFireMode",1,0) == 1) // If Bruiser Blast Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,0) == 2) // If Ground Wave Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				invoker.shotsfired = 0;
				if (CallACS("HellcoreFireMode",1,0) == 0) // If Alterating Fire Wave Mode is set
				{
					invoker.bruiseraltdirection = 0;
					if (random(1,2) == 1) { invoker.bruiseraltdirection = 1; }
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
				if (CallACS("HellcoreFireMode",1,0) == 1) // If Bruiser Blast Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,0) == 2) // If Ground Wave Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 KKKKKKK 1 bright
			{
				A_SetTics(0); 
				if (CallACS("HellcoreFireMode",1,0) == 0) // If Alterating Fire Wave Mode is set
				{
					A_SetTics(1);
					if (invoker.shotsfired == 0) { A_HellSoulCrisisCheck(); }
					invoker.baseangle = (-50 + (invoker.shotsfired * 10));
					if (invoker.bruiseraltdirection == 0) { invoker.baseangle *= 1; }
					if (invoker.bruiseraltdirection == 1) { invoker.baseangle *= -1; }
					invoker.shotsfired++;
					if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 7", invoker.shotsfired);
					if (dvdsdebug_hellcorepickups1) Console.Printf("baseangle: %8f", invoker.baseangle);
					if (invoker.shotsfired > 7) { invoker.shotsfired = 0; }
					if (invoker.shotsfired == 1) 
					{ 
						A_HellSoulSpark();
						A_HellSoulFire1("baron/attack",71,"BruiserBall2-Soul","BruiserBall2Crisis-Soul",104,true,true,invoker.baseangle);
					}
					else 
					{ 
						A_HellSoulFire1("",71,"BruiserBall2-Soul","BruiserBall2Crisis-Soul",104,true,false,invoker.baseangle);
					}
				}
			}
			HCL1 K 4 bright
			{
				A_SetTics(0); 
				if (CallACS("HellcoreFireMode",1,0) == 1) // If Bruiser Blast Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("baron/attack",400,"BruiserBall-Soul","BruiserBallCrisis-Soul",104,true,true,0.0);
				}
			}
			HCL1 KKKK 1 bright
			{
				A_SetTics(0);
				if (CallACS("HellcoreFireMode",1,0) == 2) // If Ground Wave Mode is set
				{
					A_SetTics(1);
					if (invoker.shotsfired == 0) { A_HellSoulCrisisCheck(); }
					invoker.shotsfired++;
					if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 4", invoker.shotsfired);
					if (invoker.shotsfired == 1)
					{
						A_HellSoulSpark();
						A_HellSoulFire1("",250,"BruiserFireSpawner-Soul","BruiserFireSpawnerCrisis-Soul",104,true,true,15.0);
					}
					else
					if (invoker.shotsfired == 2)
					{
						A_HellSoulFire1("",250,"BruiserFireSpawner-Soul","BruiserFireSpawnerCrisis-Soul",104,true,false,0.0);
					}
					else
					if (invoker.shotsfired == 3)
					{
						A_HellSoulFire1("",250,"BruiserFireSpawner-Soul","BruiserFireSpawnerCrisis-Soul",104,true,false,-15.0);
					}
				}
			}
			HCL1 L 4 bright
			{
				if (CallACS("HellcoreFireMode",1,0) == 0) // If Alterating Fire Wave Mode is set
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
				if (CallACS("HellcoreFireMode",1,0) == 1) // If Bruiser Blast Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,0) == 2) // If Ground Wave Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;

		User4:
			HCL1 A 5 
			{
				A_StartSound("elecstun",102, CHANF_DEFAULT, 1.0, ATTN_NORM, frandom(1.25,1.75));
				CallACS("HellcoreFireMode",0,0);
			}
			Goto Ready;
	}
}

// Archon of Hell's Soul [Slot 5] (Weapon)
class ArchonSoulCI : BaseHellcorePickup //32231
{
	Default
	{
		//$Sprite "HCSLJ0"
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		Tag "Archon of Hell's Soul: [Hellcore] Uses Archon of Hell attacks [alt-fire selects mode]";
		Inventory.PickupMessage "You got an Archon of Hell's Soul! \cx[Slot 5]\c-";
	}

	States
	{
		Spawn:
			HCSL J 1 bright NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(9);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("ArchonSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(10);
			}
			Stop;
	}
}
class ArchonSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLJ0"
		Tag "Archon of Hell's";
		+FLOATBOB;
		+DONTGIB;
		+WEAPON.NOAUTOAIM;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got an Archon of Hell's Soul! \cx[Slot 5]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.75, 1.75;
		BaseHellcoreWeapon.bobxetimemul 0.22375, 0.27625;
		BaseHellcoreWeapon.bobxspeedmod 2.1;
		BaseHellcoreWeapon.bobxheightmod 4.5625, 5.4375;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.875, 0.875;
		BaseHellcoreWeapon.bobyspeedmod 8.21875;
		BaseHellcoreWeapon.bobyheightmod 7.34375, 8.65625;
		
		BaseHellcoreWeapon.randomsounds "monster/ar2sit", "archon/pain", "monster/ar2dth", "baron/active", "monster/ar2sit", "archon/pain", "monster/ar2dth", "baron/active";
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 J 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL J 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady(WRF_ALLOWUSER4);
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("HellcoreFireMode",1,1) == 0) // Tri-Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,1) == 1) // Plasma Wave
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,1) == 2) // Comet Blast
				{
					A_SetTics(5);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(4); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(3); }
				}
			}
			HCL1 G 4 bright
			{
				if (CallACS("HellcoreFireMode",1,1) == 0) // Tri-Shot Mode
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,-4.0);
					A_HellSoulFire1("baron/attack",400,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,true,0.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,4.0);
				}
				if (CallACS("HellcoreFireMode",1,1) == 1) // Plasma Wave
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,-6.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,-4.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,-2.0);
					A_HellSoulFire1("baron/attack",750,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,true,0.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,2.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,4.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,6.0);
				}
				if (CallACS("HellcoreFireMode",1,1) == 2) // Comet Blast
				{
					A_SetTics(7);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 1) { A_SetTics(6); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(6); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(5); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(5); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(4); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("weapons/firbfi",650,"ArchonComet-Soul","ArchonCometCrisis-Soul",105,true,true,0.0);
				}
			}
			HCL1 H 4 bright
			{
				if (CallACS("HellcoreFireMode",1,1) == 0) // Tri-Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,1) == 1) // Plasma Wave
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,1) == 2) // Comet Blast
				{
					A_SetTics(5);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(4); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(3); }
				}
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("HellcoreFireMode",1,1) == 0) // Tri-Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,1) == 1) // Plasma Wave
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,1) == 2) // Comet Blast
				{
					A_SetTics(5);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(4); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(3); }
				}
			}
			HCL1 K 4 bright
			{
				if (CallACS("HellcoreFireMode",1,1) == 0) // Tri-Shot Mode
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,-4.0);
					A_HellSoulFire1("baron/attack",400,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,true,0.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,4.0);
				}
				if (CallACS("HellcoreFireMode",1,1) == 1) // Plasma Wave
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,-6.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,-4.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,-2.0);
					A_HellSoulFire1("baron/attack",750,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,true,0.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,2.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,4.0);
					A_HellSoulFire1("",0,"ArchonOfHellBall-Soul","ArchonOfHellBallCrisis-Soul",105,true,false,6.0);
				}
				if (CallACS("HellcoreFireMode",1,1) == 2) // Comet Blast
				{
					A_SetTics(7);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 1) { A_SetTics(6); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(6); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(5); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(5); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(4); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("weapons/firbfi",650,"ArchonComet-Soul","ArchonCometCrisis-Soul",105,true,true,0.0);
				}
			}
			HCL1 L 4 bright
			{
				if (CallACS("HellcoreFireMode",1,1) == 0) // Tri-Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,1) == 1) // Plasma Wave
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,1) == 2) // Comet Blast
				{
					A_SetTics(5);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(4); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(3); }
				}
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;

		User4:
			HCL1 A 5
			{
				A_StartSound("elecstun",102, CHANF_DEFAULT, 1.0, ATTN_NORM, frandom(1.25,1.75));
				CallACS("HellcoreFireMode",0,1);
			}
			Goto Ready;
	}
}

// Pyro Demon's Soul [Slot 5] (Weapon)
class PyroDemonSoulCI : BaseHellcorePickup //32231
{
	Default
	{
		//$Sprite "HCSLK0"
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		Tag "Pyro Demon's Soul: [Hellcore] Uses Pyro Demon attacks [alt-fire selects mode]";
		Inventory.PickupMessage "You got a Pyro Demon's Soul! \cx[Slot 5]\c-";
	}
	
	States
	{
		Spawn:
			HCSL K 1 bright NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(10);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("PyroDemonSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(11);
			}
			Stop;
	}
}
class PyroDemonSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLK0"
		Tag "Pyro Demon's Soul";
		+FLOATBOB;
		+DONTGIB;
		+WEAPON.NOAUTOAIM;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Pyro Demon's Soul! \cx[Slot 5]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -2.2, 2.2;
		BaseHellcoreWeapon.bobxetimemul 0.217, 0.283;
		BaseHellcoreWeapon.bobxspeedmod 2.64;
		BaseHellcoreWeapon.bobxheightmod 4.45, 5.55;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -1.1, 1.1;
		BaseHellcoreWeapon.bobyspeedmod 8.275;
		BaseHellcoreWeapon.bobyheightmod 7.175, 8.825;
		
		BaseHellcoreWeapon.randomsounds "pyro/see", "pyro/pain", "pyro/death", "pyro/idle", "pyro/see", "pyro/pain", "pyro/death", "pyro/idle";
	}

	action void A_HellSoulPyroPort1()
	{
		double angle1 = 0.0;
		double angle2 = 0.0;
		double angle3 = 180.0;
		double angle4 = 45.0;
		double angle5 = 135.0;
		double angle6 = 225.0;
		double angle7 = 315.0;
		double offsetrand = frandom(0.5,1.5);
		double offset1 = 45.0 * offsetrand;
		double offset2 = 22.5 * offsetrand;
		if (CountInv("SpreaderAura2",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_PlayCrisisAtkSound();

				A_SetAngle(angle-angle1); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,0.0,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle1);
				A_SetAngle(angle-angle2); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,offset1,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle2);
				A_SetAngle(angle-angle3); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,offset1,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle3);
				A_SetAngle(angle-angle4); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,offset2,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle4);
				A_SetAngle(angle-angle5); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,offset2,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle5);
				A_SetAngle(angle-angle6); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,offset2,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle6);
				A_SetAngle(angle-angle7); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,offset2,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle6);
			}
			else
			{
				A_SetAngle(angle-angle1); A_FireProjectile("EscapeExplosion-Soul",0.0,0,0.0,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle1);
				A_SetAngle(angle-angle2); A_FireProjectile("EscapeExplosion-Soul",0.0,0,offset1,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle2);
				A_SetAngle(angle-angle3); A_FireProjectile("EscapeExplosion-Soul",0.0,0,offset1,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle3);
				A_SetAngle(angle-angle4); A_FireProjectile("EscapeExplosion-Soul",0.0,0,offset2,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle4);
				A_SetAngle(angle-angle5); A_FireProjectile("EscapeExplosion-Soul",0.0,0,offset2,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle5);
				A_SetAngle(angle-angle6); A_FireProjectile("EscapeExplosion-Soul",0.0,0,offset2,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle6);
				A_SetAngle(angle-angle7); A_FireProjectile("EscapeExplosion-Soul",0.0,0,offset2,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle6);
			}
		}
		else
		if (CountInv("SpreaderAura1",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_PlayCrisisAtkSound();
				A_SetAngle(angle-angle1); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,0.0,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle1);
				A_SetAngle(angle-angle2); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,offset1,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle2);
				A_SetAngle(angle-angle3); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,offset1,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle3);
			}
			else
			{
				A_SetAngle(angle-angle1); A_FireProjectile("EscapeExplosion-Soul",0.0,0,0.0,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle1);
				A_SetAngle(angle-angle2); A_FireProjectile("EscapeExplosion-Soul",0.0,0,offset1,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle2);
				A_SetAngle(angle-angle3); A_FireProjectile("EscapeExplosion-Soul",0.0,0,offset1,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle3);
			}
		}
		else
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_PlayCrisisAtkSound();
				A_SetAngle(angle-angle1); A_FireProjectile("EscapeExplosionCrisis-Soul",0.0,0,0.0,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle1);
			}
			else
			{
				A_SetAngle(angle-angle1); A_FireProjectile("EscapeExplosion-Soul",0.0,0,0.0,0,FPF_NOAUTOAIM,0.0); A_SetAngle(angle+angle1);
			}
		}
	}
	
	action void A_HellSoulPyroRainAtk()
	{
		A_IncreaseHellcoreHeat(250,1); // +2.5% Hellcore Heat, Deal Damage if already above 100% Heat
		CallACS("StartTensionCountDown");
		A_StartSound("caco/attack");

		if (A_HellCoreCrisisCheck() > 0)
		{
			A_PlayCrisisAtkSound();
			A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",  0,0,"",0,0,0,0); 
			A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul", 90,0,"",0,0,0,0); 
			A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",180,0,"",0,0,0,0); 
			A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",270,0,"",0,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",106) >= 4) 
			{
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",0-15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",0+15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",90-15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",90+15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",180-15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",180+15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",270-15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",270+15,0,"",0,0,0,0); 
			}
			if (CallACS("MiscVarCheckDECORATE",106) >= 7) 
			{
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",0-30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",0+30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",90-30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",90+30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",180-30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",180+30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",270-30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNullCrisis-Soul",270+30,0,"",0,0,0,0); 
			}
		}
		else
		{
			A_SpreadAuraFireProjectile("RainCometNull-Soul",  0,0,"",0,0,0,0); 
			A_SpreadAuraFireProjectile("RainCometNull-Soul", 90,0,"",0,0,0,0); 
			A_SpreadAuraFireProjectile("RainCometNull-Soul",180,0,"",0,0,0,0); 
			A_SpreadAuraFireProjectile("RainCometNull-Soul",270,0,"",0,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",106) >= 4) 
			{
				A_SpreadAuraFireProjectile("RainCometNull-Soul",0-15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",0+15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",90-15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",90+15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",180-15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",180+15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",270-15,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",270+15,0,"",0,0,0,0); 
			}
			if (CallACS("MiscVarCheckDECORATE",106) >= 7) 
			{
				A_SpreadAuraFireProjectile("RainCometNull-Soul",0-30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",0+30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",90-30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",90+30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",180-30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",180+30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",270-30,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("RainCometNull-Soul",270+30,0,"",0,0,0,0); 
			}
		}
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 K 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL K 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady(WRF_ALLOWUSER4);
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("HellcoreFireMode",1,2) == 0) // Pyromatic Shot
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,2) == 1) // Pyroball
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,2) == 2) // Pyromatic Firebomb
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 G 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

				if (CallACS("HellcoreFireMode",1,2) == 0) // Pyromatic Shot
				{
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"FireShot-Soul","FireShotCrisis-Soul",106,true,false,-4.0);
					A_HellSoulFire1("caco/attack",350,"FireShot-Soul","FireShotCrisis-Soul",106,true,true,0.0);
					A_HellSoulFire1("",0,"FireShot-Soul","FireShotCrisis-Soul",106,true,false,4.0);
				}
				if (CallACS("HellcoreFireMode",1,2) == 1) // Pyroball
				{
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("caco/attack",450,"PyroBlast-Soul","PyroBlastCrisis-Soul",106,true,true,0.0);
				}
				if (CallACS("HellcoreFireMode",1,2) == 2) // Pyromatic Firebomb
				{
					A_HellSoulSpark();
					A_HellSoulPyroRainAtk();
				}
			}
			HCL1 H 4 bright
			{
				if (CallACS("HellcoreFireMode",1,2) == 0) // Pyromatic Shot
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,2) == 1) // Pyroball
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,2) == 2) // Pyromatic Firebomb
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("HellcoreFireMode",1,2) == 0) // Pyromatic Shot
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,2) == 1) // Pyroball
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,2) == 2) // Pyromatic Firebomb
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 K 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

				if (CallACS("HellcoreFireMode",1,2) == 0) // Pyromatic Shot
				{
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"FireShot-Soul","FireShotCrisis-Soul",106,true,false,-4.0);
					A_HellSoulFire1("caco/attack",350,"FireShot-Soul","FireShotCrisis-Soul",106,true,true,0.0);
					A_HellSoulFire1("",0,"FireShot-Soul","FireShotCrisis-Soul",106,true,false,4.0);
				}
				if (CallACS("HellcoreFireMode",1,2) == 1) // Pyroball
				{
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("caco/attack",450,"PyroBlast-Soul","PyroBlastCrisis-Soul",106,true,true,0.0);
				}
				if (CallACS("HellcoreFireMode",1,2) == 2) // Pyromatic Firebomb
				{
					A_HellSoulSpark();
					A_HellSoulPyroRainAtk();
				}
			}
			HCL1 L 4 bright
			{
				if (CallACS("HellcoreFireMode",1,2) == 0) // Pyromatic Shot
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,2) == 1) // Pyroball
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,2) == 2) // Pyromatic Firebomb
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
			
		
		// Alt Fire
		AltFire:
			HCL1 MN 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 N 0
			{
				if (random(1,2) == 1) { return resolvestate("AltFire2"); }
				else { return resolvestate("AltFire1"); }
				return resolvestate(null);
			}
		AltFire1:
			HCL1 O 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim1:
			HCL1 P 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 Q 0 bright
			{
				A_UnSetShootable();
				A_SetInvulnerable();
				A_IncreaseHellcoreHeat(800,1); // +8.0% Hellcore Heat, Deal Damage if already above 100% Heat
				CallACS("StartTensionCountDown");
				A_HellCoreCrisisCheck();
				A_StartSound("pyro/tele",101);
			}
			TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 
			{
				A_Wander();
			}
			HCL1 Q 0 bright
			{
				A_StartSound("pyro/tele",101);
				A_HellSoulPyroPort1();
			}
			HCL1 Q 12 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 1) { A_SetTics(11); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(10); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(8); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(7); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(6); }
			}
			TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 
			{
				A_Wander();
			}
			HCL1 Q 0 bright
			{
				A_StartSound("pyro/tele",101);
				A_HellSoulPyroPort1();
			}
			HCL1 R 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_UnSetInvulnerable();
				A_SetShootable();
			}
			HCL1 O 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim1"); }
				else { A_Refire("AltReFireAnim2"); }
			}
			HCL1 O 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFire2:
			HCL1 S 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim2:
			HCL1 T 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 U 0 bright
			{
				A_UnSetShootable();
				A_SetInvulnerable();
				A_IncreaseHellcoreHeat(800,1); // +8.0% Hellcore Heat, Deal Damage if already above 100% Heat
				CallACS("StartTensionCountDown");
				A_HellCoreCrisisCheck();
				A_StartSound("pyro/tele",101);
			}
			TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 
			{
				A_Wander();
			}
			HCL1 U 0 bright
			{
				A_StartSound("pyro/tele",101);
				A_HellSoulPyroPort1();
			}
			HCL1 U 12 bright 
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 1) { A_SetTics(11); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(10); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(8); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(7); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(6); }
			}
			TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 
			{
				A_Wander();
			}
			HCL1 U 0 bright
			{
				A_StartSound("pyro/tele",101);
				A_HellSoulPyroPort1();
			}
			HCL1 V 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				A_UnSetInvulnerable();
				A_SetShootable();
			}
			HCL1 S 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim2"); }
				else { A_Refire("AltReFireAnim1"); }
			}
			HCL1 S 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFireEnd:
			HCL1 NM 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;

		User4:
			HCL1 A 5 
			{
				A_StartSound("elecstun",102, CHANF_DEFAULT, 1.0, ATTN_NORM, frandom(1.25,1.75));
				CallACS("HellcoreFireMode",0,2);
			}
			Goto Ready;
	}
}

// Death Incarnate's Soul [Slot 6] (Weapon)
class IncarnateSoulCI : BaseHellcorePickup //32233
{
	Default
	{
		//$Sprite "HCSLL0"
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		Tag "Death Incarnate's Soul: [Hellcore] Fires off the Death Incarnate's glare";
		Inventory.PickupMessage "You got an Death Incarnate's Soul! \cx[Slot 6]\c-";
	}

	States
	{
		Spawn:
			HCSL L 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(11);
			}
			Loop;

		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("IncarnateSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(12);
			}
			Stop;
	}
}

class IncarnateSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLL0"
		Tag "Death Incarnate's Soul";
		+FLOATBOB;
		+DONTGIB;
		+WEAPON.NOAUTOAIM;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got an Death Incarnate's Soul! \cx[Slot 6]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -0.75, 0.75;
		BaseHellcoreWeapon.bobxetimemul 0.2375, 0.2625;
		BaseHellcoreWeapon.bobxspeedmod 1.175;
		BaseHellcoreWeapon.bobxheightmod 4.8, 5.2;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.375, 0.375;
		BaseHellcoreWeapon.bobyspeedmod 8.075;
		BaseHellcoreWeapon.bobyheightmod 7.75, 8.25;
		
		BaseHellcoreWeapon.randomsounds "monster/incsit", "dincarnate/pain", "monster/incdth", "monster/incact", "monster/incsit", "dincarnate/pain", "monster/incdth", "monster/incact";
	}
	
	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 L 0 bright 
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL L 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 G 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

				A_HellSoulFire2("monster/incatk",360,"DIPuff-Soul",107,true,true);
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 K 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

				A_HellSoulFire2("monster/incatk",360,"DIPuff-Soul",107,true,true);
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

// Archvile's Soul [Slot 6] (Weapon)
class ArchvileSoulCI : BaseHellcorePickup //32234
{
	Default
	{
		//$Sprite "HCSLM0"
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		Tag "Archvile's Soul: [Hellcore] Uses Archvile's Immolation and Resurrection Abilities.";
		Inventory.PickupMessage "You got the Arch Vile's Soul! \cx[Slot 6]\c-";
	}

	States
	{
		Spawn:
			HCSL M 1 NoDelay bright 
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(12);
			}
			Loop;

		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("ArchvileSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(13);
			}
			Stop;
	}
}

class ArchvileSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLM0"
		+FLOATBOB;
		+DONTGIB;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOAUTOAIM;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got an Archvile's Soul! \cx[Slot 6]\c-";
		Tag "Archvile's Soul";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.0625, 1.0625;
		BaseHellcoreWeapon.bobxetimemul 0.235, 0.265;
		BaseHellcoreWeapon.bobxspeedmod 1.2;
		BaseHellcoreWeapon.bobxheightmod 4.68, 5.32;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.53125, 0.53125;
		BaseHellcoreWeapon.bobyspeedmod 8.1;
		BaseHellcoreWeapon.bobyheightmod 7.675, 8.325;
		
		BaseHellcoreWeapon.randomsounds "vile/sight", "vile/pain", "vile/death", "vile/active", "vile/sight", "vile/pain", "vile/death", "vile/active";
	}
	
	action void A_HellSoulVileTarget(string type1 = "ArchvileFire", string typecrisis = "ArchvileFireCrisis")
	{
		CallACS("StartTensionCountDown");
		if (CountInv("SpreaderAura2",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_PlayCrisisAtkSound();
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
			}
			else
			{
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
			}
		}
		else
		if (CountInv("SpreaderAura1",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_PlayCrisisAtkSound();
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
			}
			else
			{
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
			}
		}
		else
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_PlayCrisisAtkSound();
				A_VileTarget(typecrisis);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
			}
			else
			{
				A_VileTarget(type1);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
			}
		}
	}
	
	action void A_HellSoulVileAttack()
	{
		CallACS("StartTensionCountDown");
		if (CountInv("SpreaderAura2",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
			else
			{
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
		}
		else
		if (CountInv("SpreaderAura1",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
			else
			{
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
		}
		else
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20*CallACS("CrisisMultiplier"),70*CallACS("CrisisMultiplier"),560,8.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
			else
			{
				A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",108) >= 4) 
				{
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",108) >= 7) 
				{
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",20,70,70,1.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
		}
	}
	
	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 M 0 bright 
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL M 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		// Main Attack
		Fire:
			HCL1 C 0
			{
				A_HellSoulVileChase();
				if (!target)
				{
					A_StartSound("inv_fail",104,CHANF_NOSTOP);
					return resolvestate("Ready");
				}
				return resolvestate(null);
			}
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				A_StartSound("vile/start");
				A_IncreaseHellcoreHeat(500,1);
				A_Light2();
				A_HellSoulVileTarget("ArchvileFireFast","ArchvileFireFastCrisis");

				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 G 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

				A_HellSoulVileAttack();
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				A_HellSoulVileChase();
				if (!target)
				{
					A_StartSound("inv_fail",104,CHANF_NOSTOP);
					return resolvestate("Ready");
				}
				else
				{
					if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
					else { A_Refire("ReFireAnim1"); }
					return resolvestate(null);
				}
				return resolvestate(null);
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				A_StartSound("vile/start");
				A_IncreaseHellcoreHeat(500,1);
				A_Light2();
				A_HellSoulVileTarget("ArchvileFireFast","ArchvileFireFastCrisis");

				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 K 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

				A_HellSoulVileAttack();
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				A_HellSoulVileChase();
				if (!target)
				{
					A_StartSound("inv_fail",104,CHANF_NOSTOP);
					return resolvestate("Ready");
				}
				else
				{
					if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
					else { A_Refire("ReFireAnim1"); }
					return resolvestate(null);
				}
				return resolvestate(null);
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
			
		// Alt Fire
		AltFire:
			HCL1 MN 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 N 0
			{
				if (random(1,2) == 1) { return resolvestate("AltFire2"); }
				else { return resolvestate("AltFire1"); }
				return resolvestate(null);
			}
		AltFire1:
			HCL1 O 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim1:
			HCL1 P 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 Q 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

				A_StartSound("NecroSummon",101);
				A_IncreaseHellcoreHeat(834,1); // +8.34% Hellcore Heat, Deal Damage if already above 100% Heat

				A_SpreadAuraFireProjectile("ReviveProj",0,0,"",0,0,0,0);
				if (CallACS("StatCheck",0) > 60)
				{
					A_SpreadAuraFireProjectile("ReviveProj",0,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",72,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",144,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",216,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",288,0,"",0,0,0,0);
				}
			}
			HCL1 R 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 O 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim1"); }
				else { A_Refire("AltReFireAnim2"); }
			}
			HCL1 O 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFire2:
			HCL1 S 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim2:
			HCL1 T 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 U 4 bright 
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

				A_StartSound("NecroSummon",101);
				A_IncreaseHellcoreHeat(834,1); // +8.34% Hellcore Heat, Deal Damage if already above 100% Heat

				A_SpreadAuraFireProjectile("ReviveProj",0,0,"",0,0,0,0);
				if (CallACS("StatCheck",0) > 60)
				{
					A_SpreadAuraFireProjectile("ReviveProj",0,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",72,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",144,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",216,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",288,0,"",0,0,0,0);
				}
			}
			HCL1 V 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 S 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim2"); }
				else { A_Refire("AltReFireAnim1"); }
			}
			HCL1 S 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFireEnd:
			HCL1 NM 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

// Diabloist's Soul [Slot 6] (Weapon)
class DiabloistSoulCI : BaseHellcorePickup //32235
{
	Default
	{
		//$Sprite "HCSLN0"
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		Tag "Diabloist's Soul: [Hellcore] Uses Diabloist attacks [alt-fire selects mode]";
		Inventory.PickupMessage "You got a Diabloist's Soul! \cx[Slot 6]\c-";
	}
	States
	{
		Spawn:
			HCSL N 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(13);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("DiabloistSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(14);
			}
			Stop;
	}
}
class DiabloistSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLN0"
		+FLOATBOB;
		+DONTGIB;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOAUTOAIM;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Diabloist's Soul! \cx[Slot 6]\c-";
		Tag "Diabloist's Soul";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.1875, 1.1875;
		BaseHellcoreWeapon.bobxetimemul 0.2325, 0.2675;
		BaseHellcoreWeapon.bobxspeedmod 1.3;
		BaseHellcoreWeapon.bobxheightmod 4.68, 5.32;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.59375, 0.59375;
		BaseHellcoreWeapon.bobyspeedmod 8.3;
		BaseHellcoreWeapon.bobyheightmod 7.65, 8.35;
		
		BaseHellcoreWeapon.randomsounds "monster/diasit", "monster/diapai", "monster/diadth", "monster/diaact", "monster/diasit", "monster/diapai", "monster/diadth", "monster/diaact";
	}
	
	action void A_HellSoulDiabTarget(string type1 = "ArchvileFire", string typecrisis = "ArchvileFireCrisis")
	{
		CallACS("StartTensionCountDown");
		if (CountInv("SpreaderAura2",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_PlayCrisisAtkSound();
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
			}
			else
			{
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
			}
		}
		else
		if (CountInv("SpreaderAura1",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_PlayCrisisAtkSound();
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				A_VileTarget(typecrisis);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
			}
			else
			{
				A_VileTarget(type1);
				A_VileTarget(type1);
				A_VileTarget(type1);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
			}
		}
		else
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_PlayCrisisAtkSound();
				A_VileTarget(typecrisis);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileTarget(typecrisis);
					A_VileTarget(typecrisis);
				}
			}
			else
			{
				A_VileTarget(type1);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileTarget(type1);
					A_VileTarget(type1);
				}
			}
		}
	}
	
	action void A_HellSoulDiabAttack5()
	{
		A_StartSound("weapons/firbfi",101);
		A_IncreaseHellcoreHeat(600,1); // +6.0% Hellcore Heat, Deal Damage if already above 100% Heat
		CallACS("StartTensionCountDown");

		if (A_HellCoreCrisisCheck() > 0)
		{
			A_PlayCrisisAtkSound();
			A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"",-40,0,0,0); 
			A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"", 40,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"",-40,0,0,0); 
				A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"", 40,0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"",-40,0,0,0); 
				A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"", 40,0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"",-40,0,0,0); 
				A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"", 40,0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"",-40,0,0,0); 
				A_SpreadAuraFireProjectile("DTracerCrisis-Soul",0,0,"", 40,0,0,0); 
				A_SetAngle(angle-30);
			}
		}
		else
		{
			A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"",-40,0,0,0); 
			A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"", 40,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"",-40,0,0,0); 
				A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"", 40,0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"",-40,0,0,0); 
				A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"", 40,0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"",-40,0,0,0); 
				A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"", 40,0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"",-40,0,0,0); 
				A_SpreadAuraFireProjectile("DTracer-Soul",0,0,"", 40,0,0,0); 
				A_SetAngle(angle-30);
			}
		}
	}

	action void A_HellSoulDiabAttack4()
	{
		A_StartSound("weapons/firbfi",101);
		A_IncreaseHellcoreHeat(450,1); // +4.5% Hellcore Heat, Deal Damage if already above 100% Heat
		CallACS("StartTensionCountDown");

		if (A_HellCoreCrisisCheck() > 0)
		{
			A_PlayCrisisAtkSound();
			A_SpreadAuraFireProjectile("DMissileCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("DMissileCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DMissileCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("DMissileCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DMissileCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("DMissileCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DMissileCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("DMissileCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DMissileCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle-30);
			}
		}
		else
		{
			A_SpreadAuraFireProjectile("DMissile-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("DMissile-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DMissile-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("DMissile-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DMissile-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("DMissile-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DMissile-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("DMissile-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DMissile-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle-30);
			}
		}
	}

	action void A_HellSoulDiabAttack3()
	{
		A_IncreaseHellcoreHeat(63,1); // +0.63% Hellcore Heat, Deal Damage if already above 100% Heat
		CallACS("StartTensionCountDown");
		if (A_HellCoreCrisisCheck() > 0)
		{
			A_PlayCrisisAtkSound();
			A_SpreadAuraFireProjectile("DFlareCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("DFlareCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DFlareCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("DFlareCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DFlareCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("DFlareCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DFlareCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("DFlareCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DFlareCrisis-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle-30);
			}
		}
		else
		{
			A_SpreadAuraFireProjectile("DFlare-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("DFlare-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DFlare-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("DFlare-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DFlare-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("DFlare-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DFlare-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("DFlare-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("DFlare-Soul",frandom(-4.0,4.0),0,"",0,0,0,0); 
				A_SetAngle(angle-30);
			}
		}
	}

	action void A_HellSoulDiabAttack()
	{
		CallACS("StartTensionCountDown");
		if (CountInv("SpreaderAura2",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
			else
			{
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
		}
		else
		if (CountInv("SpreaderAura1",AAPTR_PLAYER1) > 0)
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
			else
			{
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
		}
		else
		{
			if (A_HellCoreCrisisCheck() > 0)
			{
				A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40*CallACS("CrisisMultiplier"),140*CallACS("CrisisMultiplier"),1120,12.0,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
			else
			{
				A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
				{
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
				if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
				{
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
					A_VileAttack("vile/stop",40,140,140,1.5,"Fire",VAF_DMGTYPEAPPLYTODIRECT);
				}
			}
		}
	}
	
	action void A_HellSoulDiabGravAtk()
	{
		A_IncreaseHellcoreHeat(1250,1); // +12.5% Hellcore Heat, Deal Damage if already above 100% Heat
		if (A_HellCoreCrisisCheck() > 0)
		{
			A_PlayCrisisAtkSound();
			A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
				A_SetAngle(angle-30);
			}
		}
		else
		{
			A_SpreadAuraFireProjectile("GravityHPBall",  0,0,"",0,0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",109) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("GravityHPBall", 0,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("GravityHPBall", 0,0,"",0,0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("GravityHPBall", 0,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("GravityHPBall", 0,0,"",0,0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",109) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("GravityHPBall", 0,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("GravityHPBall", 0,0,"",0,0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("GravityHPBall", 0,0,"",0,0,0,0); 
				A_SpreadAuraFireProjectile("GravityHPBall", 0,0,"",0,0,0,0); 
				A_SetAngle(angle-30);
			}
		}
	}
	
	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 N 0 bright 
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL N 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady(WRF_ALLOWUSER4);
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		// Main Attack
		Fire:
			HCL1 C 0
			{
				if (CallACS("HellcoreFireMode",1,3) == 1) // If Immolation Mode is set
				{
					A_HellSoulVileChase();
					if (!target)
					{
						A_StartSound("inv_fail",104,CHANF_NOSTOP);
						return resolvestate("Ready");
					}
					return resolvestate(null);
				}
				return resolvestate(null);
			}
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("HellcoreFireMode",1,3) == 0) // If Gravity Glare Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 1) // If Immolation Mode is set
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(2); }
					
					A_StartSound("vile/start");
					A_IncreaseHellcoreHeat(600,1);
					A_Light2();
					A_HellSoulDiabTarget("DFire-Soul","DFireCrisis-Soul");
				}
				if (CallACS("HellcoreFireMode",1,3) == 2) // If Fire Thrower Mode is set
				{
					A_SetTics(2);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 3) // If Fire Blast (aka Cleric's FlameStorm 2.0) Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 4) // If Snakes of Fire Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 G 4 bright
			{
				if (CallACS("HellcoreFireMode",1,3) == 0) // If Gravity Glare Mode is set
				{
					A_SetTics(8);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 1) { A_SetTics(7); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(6); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(6); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(5); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(4); }

					A_HellSoulSpark();
					A_HellSoulDiabGravAtk();
				}
				if (CallACS("HellcoreFireMode",1,3) == 1) // If Immolation Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

					A_HellSoulSpark();
					A_HellSoulDiabAttack();
				}
				if (CallACS("HellcoreFireMode",1,3) == 2) // If Fire Thrower Mode is set
				{
					A_SetTics(2);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
					
					A_HellSoulSpark();
					A_HellSoulDiabAttack3();
				}
				if (CallACS("HellcoreFireMode",1,3) == 3) // If Fire Blast (aka Cleric's FlameStorm 2.0) Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

					A_HellSoulSpark();
					A_HellSoulDiabAttack4();
				}
				if (CallACS("HellcoreFireMode",1,3) == 4) // If Snakes of Fire Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

					A_HellSoulSpark();
					A_HellSoulDiabAttack5();
				}
			}
			HCL1 H 4 bright
			{
				if (CallACS("HellcoreFireMode",1,3) == 0) // If Gravity Glare Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 1) // If Immolation Mode is set
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 2) // If Fire Thrower Mode is set
				{
					A_SetTics(2);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 3) // If Fire Blast (aka Cleric's FlameStorm 2.0) Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 4) // If Snakes of Fire Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 E 0
			{
				if (CallACS("HellcoreFireMode",1,3) == 1) // If Immolation Mode is set
				{
					A_HellSoulVileChase();
					if (!target)
					{
						A_StartSound("inv_fail",104,CHANF_NOSTOP);
						return resolvestate("Ready");
					}
					else
					{
						if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
						else { A_Refire("ReFireAnim2"); }
					}
					return resolvestate(null);
				}
				else
				{
					if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
					else { A_Refire("ReFireAnim2"); }
				}
				return resolvestate(null);
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("HellcoreFireMode",1,3) == 0) // If Gravity Glare Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 1) // If Immolation Mode is set
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(2); }
					
					A_StartSound("vile/start");
					A_IncreaseHellcoreHeat(600,1);
					A_Light2();
					A_HellSoulDiabTarget("DFire-Soul","DFireCrisis-Soul");
				}
				if (CallACS("HellcoreFireMode",1,3) == 2) // If Fire Thrower Mode is set
				{
					A_SetTics(2);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 3) // If Fire Blast (aka Cleric's FlameStorm 2.0) Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 4) // If Snakes of Fire Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 K 4 bright
			{
				if (CallACS("HellcoreFireMode",1,3) == 0) // If Gravity Glare Mode is set
				{
					A_SetTics(8);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 1) { A_SetTics(7); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(6); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(6); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(5); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(4); }

					A_HellSoulSpark();
					A_HellSoulDiabGravAtk();
				}
				if (CallACS("HellcoreFireMode",1,3) == 1) // If Immolation Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

					A_HellSoulSpark();
					A_HellSoulDiabAttack();
				}
				if (CallACS("HellcoreFireMode",1,3) == 2) // If Fire Thrower Mode is set
				{
					A_SetTics(2);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
					
					A_HellSoulSpark();
					A_HellSoulDiabAttack3();
				}
				if (CallACS("HellcoreFireMode",1,3) == 3) // If Fire Blast (aka Cleric's FlameStorm 2.0) Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

					A_HellSoulSpark();
					A_HellSoulDiabAttack4();
				}
				if (CallACS("HellcoreFireMode",1,3) == 4) // If Snakes of Fire Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

					A_HellSoulSpark();
					A_HellSoulDiabAttack5();
				}
			}
			HCL1 L 4 bright
			{
				if (CallACS("HellcoreFireMode",1,3) == 0) // If Gravity Glare Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 1) // If Immolation Mode is set
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 2) // If Fire Thrower Mode is set
				{
					A_SetTics(2);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 3) // If Fire Blast (aka Cleric's FlameStorm 2.0) Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,3) == 4) // If Snakes of Fire Mode is set
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 I 0
			{
				if (CallACS("HellcoreFireMode",1,3) == 1) // If Immolation Mode is set
				{
					A_HellSoulVileChase();
					if (!target)
					{
						A_StartSound("inv_fail",104,CHANF_NOSTOP);
						return resolvestate("Ready");
					}
					else
					{
						if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
						else { A_Refire("ReFireAnim2"); }
					}
					return resolvestate(null);
				}
				else
				{
					if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
					else { A_Refire("ReFireAnim2"); }
				}
				return resolvestate(null);
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
			
		// Fire Mode Changer
		User4:
			HCL1 A 5 
			{
				A_StartSound("elecstun",102, CHANF_DEFAULT, 1.0, ATTN_NORM, frandom(1.25,1.75));
				CallACS("HellcoreFireMode",0,3);
			}
			Goto Ready;
		
		
		// Alt Fire
		AltFire:
			HCL1 MN 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 N 0
			{
				if (random(1,2) == 1) { return resolvestate("AltFire2"); }
				else { return resolvestate("AltFire1"); }
				return resolvestate(null);
			}
		AltFire1:
			HCL1 O 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim1:
			HCL1 P 4 bright
			{
				invoker.shotsfired = 0;
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 QQ 2 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }

				invoker.shotsfired++;
				if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 2", invoker.shotsfired);
				if (invoker.shotsfired > 2) { invoker.shotsfired = 0; }

				if (invoker.shotsfired == 1) 
				{ 
					A_HellSoulSpark();
					A_IncreaseHellcoreHeat(834,1); // +8.34% Hellcore Heat, Deal Damage if already above 100% Heat
				}
				else 
				{ 
					A_IncreaseHellcoreHeat(834,0); // +8.34% Hellcore Heat, Don't Deal Damage if already above 100% Heat
				}

				A_StartSound("NecroSummon",101);
				A_SpreadAuraFireProjectile("ReviveProj",0,0,"",0,0,0,0);
				if (CallACS("StatCheck",0) > 60)
				{
					A_SpreadAuraFireProjectile("ReviveProj",0,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",72,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",144,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",216,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",288,0,"",0,0,0,0);
				}
			}
			HCL1 R 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 O 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim1"); }
				else { A_Refire("AltReFireAnim2"); }
			}
			HCL1 O 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFire2:
			HCL1 S 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim2:
			HCL1 T 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 UU 2 bright 
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }

				invoker.shotsfired++;
				if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 2", invoker.shotsfired);
				if (invoker.shotsfired > 2) { invoker.shotsfired = 0; }

				if (invoker.shotsfired == 1) 
				{ 
					A_HellSoulSpark();
					A_IncreaseHellcoreHeat(834,1); // +8.34% Hellcore Heat, Deal Damage if already above 100% Heat
				}
				else 
				{ 
					A_IncreaseHellcoreHeat(834,0); // +8.34% Hellcore Heat, Don't Deal Damage if already above 100% Heat
				}

				A_StartSound("NecroSummon",101);
				A_SpreadAuraFireProjectile("ReviveProj",0,0,"",0,0,0,0);
				if (CallACS("StatCheck",0) > 60)
				{
					A_SpreadAuraFireProjectile("ReviveProj",0,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",72,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",144,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",216,0,"",0,0,0,0);
					A_SpreadAuraFireProjectile("ReviveProj",288,0,"",0,0,0,0);
				}
			}
			HCL1 V 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 S 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim2"); }
				else { A_Refire("AltReFireAnim1"); }
			}
			HCL1 S 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFireEnd:
			HCL1 NM 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}


// Flying Balrog's Soul [Slot 6] (Weapon)
class BalrogSoulCI : BaseHellcorePickup //32236
{
	Default
	{
		//$Sprite "HCSLO0"
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		//ConversationID 385; // 345+ are unused by Strife, this is for use in DIALOUxx/SCRIPTxx references
		Tag "Flying Balrog's Soul: [Hellcore] Shoots the Flying Balrog's Cluster Fire-shot.";
		Inventory.PickupMessage "You got the Flying Balrog's Soul! \cx[Slot 6]\c-";
	}
	States
	{
		Spawn:
			HCSL O 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(14);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("BalrogSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(15);
			}
			Stop;
	}
}
class BalrogSoul : BaseHellcoreWeapon
{
	Default
	{
		//$Sprite "HCSLO0"
		Tag "Flying Balrog's Soul";
		+FLOATBOB;
		+DONTGIB;
		+WEAPON.NOAUTOAIM;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got the Flying Balrog's Soul! \cx[Slot 6]\c-";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.75, 1.75;
		BaseHellcoreWeapon.bobxetimemul 0.22375, 0.27625;
		BaseHellcoreWeapon.bobxspeedmod 2.1;
		BaseHellcoreWeapon.bobxheightmod 4.5625, 5.4375;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.875, 0.875;
		BaseHellcoreWeapon.bobyspeedmod 8.21875;
		BaseHellcoreWeapon.bobyheightmod 7.34375, 8.65625;
		
		BaseHellcoreWeapon.randomsounds "flyingbalrog/sight", "flyingbalrog/pain", "flyingbalrog/death", "flyingbalrog/idle", "flyingbalrog/sight", "flyingbalrog/pain", "flyingbalrog/death", "flyingbalrog/idle";
	}
	
	action void A_HellSoulBalrogShot1()
	{
		A_StartSound("imp/attack",101);
		A_IncreaseHellcoreHeat(600,1); // +6.0% Hellcore Heat, Deal Damage if already above 100% Heat
		CallACS("StartTensionCountDown");
		double shot1angle;
		double shot1offset;
		shot1angle = 4.0;
		shot1offset = 5.0;

		if (A_HellCoreCrisisCheck() > 0)
		{
			A_PlayCrisisAtkSound();
			A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",  0,0,"",  0,0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",110) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",  0,0,"",  0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",  0,0,"",  0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",110) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",  0,0,"",  0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",  0,0,"",  0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1Crisis-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
				A_SetAngle(angle-30);
			}
		}
		else
		{
			A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",  0,0,"",  0,0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",110) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",  0,0,"",  0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",  0,0,"",  0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",110) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",  0,0,"",  0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*3),0,"",(shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(shot1offset*2),0,"",(shot1angle*3),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",  0,0,"",  0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*2),0,"",(-shot1angle*2),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot1-Soul",(-shot1offset*3),0,"",(-shot1angle*3),0,0,0); 
				A_SetAngle(angle-30);
			}
		}
	}

	action void A_HellSoulBalrogShot2()
	{
		CallACS("StartTensionCountDown");
		double shot2angle;
		double shot2offset;
		shot2angle = 6.0;
		shot2offset = 9.0;

		if (A_HellCoreCrisisCheck() > 0)
		{
			A_PlayCrisisAtkSound();
			A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",  0,0,"", 0,0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",110) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",  0,0,"", 0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",  0,0,"", 0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",110) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",  0,0,"", 0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",  0,0,"", 0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2Crisis-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
				A_SetAngle(angle-30);
			}
		}
		else
		{
			A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",  0,0,"", 0,0,0,0); 
			A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
			if (CallACS("MiscVarCheckDECORATE",110) >= 4) 
			{
				A_SetAngle(angle-15);
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",  0,0,"", 0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
				A_SetAngle(angle+30);
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",  0,0,"", 0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
				A_SetAngle(angle-15);
			}
			if (CallACS("MiscVarCheckDECORATE",110) >= 7) 
			{
				A_SetAngle(angle-30);
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",  0,0,"", 0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
				A_SetAngle(angle+60);
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(shot2offset),0,"",(shot2angle),0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",  0,0,"", 0,0,0,0); 
				A_SpreadAuraFireProjectile("FlyingBalrogShot2-Soul",(-shot2offset),0,"",(-shot2angle),0,0,0); 
				A_SetAngle(angle-30);
			}
		}
	}

	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 O 0 bright
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL O 1 bright NoDelay;
			Loop;

		Ready: 
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady;
			Loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;

		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				invoker.shotsfired = 0;
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 GG 2 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				invoker.shotsfired++;
				if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 2", invoker.shotsfired);
				if (invoker.shotsfired > 2) { invoker.shotsfired = 0; }
				if (invoker.shotsfired == 1) 
				{
					A_HellSoulSpark();
					A_HellSoulBalrogShot1(); 
				}
				else 
				if (invoker.shotsfired == 2) 
				{ 
					A_HellSoulBalrogShot2(); 
				}
			}
			HCL1 H 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 E 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				invoker.shotsfired = 0;
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 KK 2 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				invoker.shotsfired++;
				if (dvdsdebug_hellcorepickups1) Console.Printf("shotsfired: %d / 2", invoker.shotsfired);
				if (invoker.shotsfired > 2) { invoker.shotsfired = 0; }
				if (invoker.shotsfired == 1) 
				{
					A_HellSoulSpark();
					A_HellSoulBalrogShot1(); 
				}
				else 
				if (invoker.shotsfired == 2) 
				{ 
					A_HellSoulBalrogShot2(); 
				}
			}
			HCL1 L 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;
	}
}

// Hades Elemental's Soul (eventually???)
class HElementalSoulCI : BaseHellcorePickup //32237
{
	Default
	{
		//$Sprite "HCSLP0"
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		Tag "Hades Elemental's Soul: [Hellcore] Use Hades Elemental attacks.";
		Inventory.PickupMessage "You got a Hades Elemental's Soul! \cx[Slot 7]\c-";
	}
	States
	{
		Spawn:
			HCSL P 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(15);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("HElementalSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(16);
			}
			Stop;
	}
}
class HElementalSoul : BaseHellCoreWeapon
{
	Default
	{
		//$Sprite "HCSLP0"
		+FLOATBOB;
		+DONTGIB;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOAUTOAIM;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Hades Elemental's Soul! \cx[Slot 7]\c-";
		Tag "Hades Elemental's Soul";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -1.0625, 1.0625;
		BaseHellcoreWeapon.bobxetimemul 0.235, 0.265;
		BaseHellcoreWeapon.bobxspeedmod 1.2;
		BaseHellcoreWeapon.bobxheightmod 4.68, 5.32;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -0.53125, 0.53125;
		BaseHellcoreWeapon.bobyspeedmod 8.1;
		BaseHellcoreWeapon.bobyheightmod 7.675, 8.325;
		
		BaseHellcoreWeapon.randomsounds "monster/helsit", "monster/helpai", "monster/heldth", "monster/helact", "monster/helsit", "monster/helpai", "monster/heldth", "monster/helact";
	}
	
	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 P 0 bright 
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL P 1 bright NoDelay;
			Loop;

		Ready:
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady(WRF_ALLOWUSER4);
			loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;
			
		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("HellcoreFireMode",1,4) == 0) // Spread Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,4) == 1) // Hades Bolt Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 G 4 bright
			{
				if (CallACS("HellcoreFireMode",1,4) == 0) // Spread Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,false,-10.0);
					A_HellSoulFire1("",0,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,false,-5.0);
					A_HellSoulFire1("",625,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,true,0.0);
					A_HellSoulFire1("",0,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,false,5.0);
					A_HellSoulFire1("",0,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,false,10.0);
				}
				if (CallACS("HellcoreFireMode",1,4) == 1) // Hades Bolt Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"HadesBolt-Soul","HadesBoltCrisis-Soul",111,true,false,-16.0);
					A_HellSoulFire1("",1125,"HadesBolt-Soul","HadesBoltCrisis-Soul",111,true,true,0.0);
					A_HellSoulFire1("",0,"HadesBolt-Soul","HadesBoltCrisis-Soul",111,true,false,16.0);
				}
			}
			HCL1 H 4 bright
			{
				if (CallACS("HellcoreFireMode",1,4) == 0) // Spread Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,4) == 1) // Hades Bolt Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("HellcoreFireMode",1,4) == 0) // Spread Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,4) == 1) // Hades Bolt Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 K 4 bright
			{
				if (CallACS("HellcoreFireMode",1,4) == 0) // Spread Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,false,-10.0);
					A_HellSoulFire1("",0,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,false,-5.0);
					A_HellSoulFire1("",625,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,true,0.0);
					A_HellSoulFire1("",0,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,false,5.0);
					A_HellSoulFire1("",0,"HadesElementalBall-Soul","HadesElementalBallCrisis-Soul",111,true,false,10.0);
				}
				if (CallACS("HellcoreFireMode",1,4) == 1) // Hades Bolt Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",0,"HadesBolt-Soul","HadesBoltCrisis-Soul",111,true,false,-16.0);
					A_HellSoulFire1("",1125,"HadesBolt-Soul","HadesBoltCrisis-Soul",111,true,true,0.0);
					A_HellSoulFire1("",0,"HadesBolt-Soul","HadesBoltCrisis-Soul",111,true,false,16.0);
				}
			}
			HCL1 L 4 bright
			{
				if (CallACS("HellcoreFireMode",1,4) == 0) // Spread Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,4) == 1) // Hades Bolt Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;

		// Alt Fire
		AltFire:
			HCL1 MN 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 N 0
			{
				if (random(1,2) == 1) { return resolvestate("AltFire2"); }
				else { return resolvestate("AltFire1"); }
				return resolvestate(null);
			}
		AltFire1:
			HCL1 O 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim1:
			HCL1 P 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 Q 4 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }

				A_HellSoulHEleSpawn("FHadesSphere", 111, 175, 45.0, 8.0);
			}
			HCL1 R 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 O 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim1"); }
				else { A_Refire("AltReFireAnim2"); }
			}
			HCL1 O 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFire2:
			HCL1 S 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		AltReFireAnim2:
			HCL1 T 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 U 4 bright 
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				
				A_HellSoulHEleSpawn("FHadesSphere", 111, 175, 45.0, 8.0);
			}
			HCL1 V 4 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
			HCL1 S 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim2"); }
				else { A_Refire("AltReFireAnim1"); }
			}
			HCL1 S 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFireEnd:
			HCL1 NM 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;

		User4:
			HCL1 A 5 
			{
				A_StartSound("elecstun",102, CHANF_DEFAULT, 1.0, ATTN_NORM, frandom(1.25,1.75));
				CallACS("HellcoreFireMode",0,4);
			}
			Goto Ready;
	}
}

// Hades Overlord's Soul (eventually???)
class HOverlordSoulCI : BaseHellcorePickup //32237
{
	Default
	{
		//$Sprite "HCSLQ0"
		//$NotAngled
		//$Color 14
		//$Category "DV-DS Weapons/Flora/Hellcore Souls"
		Tag "Hades Overlord's Soul: [Hellcore] Use Hades Overlord attacks.";
		Inventory.PickupMessage "You got a Hades Overlord's Soul! \cx[Slot 7]\c-";
	}
	
	States
	{
		Spawn:
			HCSL Q 1 NoDelay bright
			{
				A_HellCoreSoulPickupPulse(1.5,1.5);
				A_HellcoreWeaponCheckCharacter(16);
			}
			Loop;
		Pickup:
			TNT1 A 0 
			{
				A_GiveInventory("HOverlordSoul", 1);
				A_HellCorePickupSound();
				A_IncreaseHellcoreLevel(17);
			}
			Stop;
	}
}
class HOverlordSoul : BaseHellCoreWeapon
{
	Default
	{
		//$Sprite "HCSLQ0"
		+FLOATBOB;
		+DONTGIB;
		+INVENTORY.ALWAYSPICKUP;
		+WEAPON.NOAUTOAIM;
		+WEAPON.NOALERT;
		Inventory.PickupMessage "You got a Hades Overlord's Soul! \cx[Slot 7]\c-";
		Tag "Hades Overlord's Soul";
		
		BaseHellcoreWeapon.bobxbasex 0.0;
		BaseHellcoreWeapon.bobxrandx -6.75, 6.75;
		BaseHellcoreWeapon.bobxetimemul 0.19, 0.37;
		BaseHellcoreWeapon.bobxspeedmod 1.6;
		BaseHellcoreWeapon.bobxheightmod 3.4, 6.6;
		BaseHellcoreWeapon.bobybasey 0.0;
		BaseHellcoreWeapon.bobyrandy -3.375, 3.375;
		BaseHellcoreWeapon.bobyspeedmod 8.75;
		BaseHellcoreWeapon.bobyheightmod 6.55, 9.45;
		
		BaseHellcoreWeapon.randomsounds "monster/ovlsit", "monster/ovlpai", "monster/ovldth", "monster/ovlact", "monster/ovlsit", "monster/ovlpai", "monster/ovldth", "monster/ovlact";
	}
	
	int heightoffset;
	
	States
	{
		// Bonus Layers
		SoulImage: // Layer 5
			HCL3 Q 0 bright 
			{ 
				A_OverlayFlags(5, PSPF_ALPHA, true); 
				A_OverlayFlags(5, PSPF_RENDERSTYLE, true); 
				A_OverlayRenderStyle(5, STYLE_Translucent); 
			}
			#### # 1 bright { A_OverlayAlpha(5, 0.125); }
			#### # 1 bright { A_OverlayAlpha(5, 0.25); }
			#### # 1 bright { A_OverlayAlpha(5, 0.375); }
			#### # 1 bright { A_OverlayAlpha(5, 0.5); }
			#### # 1 bright { A_OverlayAlpha(5, 0.625); }
			#### # 1 bright { A_OverlayAlpha(5, 0.75); }
			#### # 1 bright { A_OverlayAlpha(5, 0.875); }
			#### # 1 bright { A_OverlayAlpha(5, 1.0); }
		SoulImage2: // Layer 5
			#### # 1 bright;
			loop;
			
		Spawn:
			HCSL Q 1 bright NoDelay;
			Loop;

		Ready:
			HCL1 A 0
			{
				A_HellSoulOverlayReady();
			}
		Idle: 
			HCL1 B 1 A_WeaponReady(WRF_ALLOWUSER4);
			loop;
		Deselect: 
			HCL1 A 1
			{
				A_HellSoulClearOverlays();
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSLower(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSLower(18);
			}
			Loop;
		Select: 
			HCL1 A 1 
			{
				A_HellSoulClearOverlays();
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10033)*3);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10034)*7.5);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10035)*2);
				A_DVDSRaise(CallACS("MiscVarCheckDECORATE",10036)*5);
				A_DVDSRaise(18);
			}
			Loop;
		Fire:
			HCL1 CD 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			HCL1 D 0
			{
				if (random(1,2) == 1) { return resolvestate("Fire2"); }
				else { return resolvestate("Fire1"); }
				return resolvestate(null);
			}
		Fire1:
			HCL1 E 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim1:
			HCL1 F 4 bright
			{
				if (CallACS("HellcoreFireMode",1,5) == 0) // Storm Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,5) == 1) // Hyper Spread Shot Mode
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
			}
			HCL1 G 4 bright
			{
				if (CallACS("HellcoreFireMode",1,5) == 0) // Storm Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
					
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					if (CountInv("LowHealth",AAPTR_PLAYER1) > 0 || CountInv("CriticalHealth",AAPTR_PLAYER1) > 0) { A_HellSoulFire1("",1625,"StormShot2-Soul","StormShot2Crisis-Soul",112,true,true,0.0); }
					else { A_HellSoulFire1("",1375,"StormShot1-Soul","StormShot1Crisis-Soul",112,true,true,0.0); }
				}
				if (CallACS("HellcoreFireMode",1,5) == 1) // Hyper Spread Shot Mode
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
					
					invoker.heightoffset = -30;
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",40,"HadesOverlordBall-Soul","HadesOverlordBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),59+invoker.heightoffset,-16.77,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"HadesOverlordBall-Soul","HadesOverlordBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),5+invoker.heightoffset,-16.77,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"HadesOverlordBall-Soul","HadesOverlordBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),59+invoker.heightoffset,16.77,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"HadesOverlordBall-Soul","HadesOverlordBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),5+invoker.heightoffset,16.77,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"OverBall-Soul","OverBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),random(34,35)+invoker.heightoffset,-20.97,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"OverBall-Soul","OverBallCrisis-Soul",112,true,true,frandom(-3.0,3.0),random(34,35)+invoker.heightoffset,20.97,frandom(-3.0,3.0));
				}
			}
			HCL1 H 4 bright
			{
				if (CallACS("HellcoreFireMode",1,5) == 0) // Storm Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,5) == 1) // Hyper Spread Shot Mode
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
			}
			HCL1 E 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim1"); }
				else { A_Refire("ReFireAnim2"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		Fire2:
			HCL1 I 4
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
			}
		ReFireAnim2:
			HCL1 J 4 bright
			{
				if (CallACS("HellcoreFireMode",1,5) == 0) // Storm Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,5) == 1) // Hyper Spread Shot Mode
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
			}
			HCL1 K 4 bright
			{
				if (CallACS("HellcoreFireMode",1,5) == 0) // Storm Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
					
					A_HellSoulSpark();
					if (CountInv("LowHealth",AAPTR_PLAYER1) > 0 || CountInv("CriticalHealth",AAPTR_PLAYER1) > 0) { A_HellSoulFire1("",1625,"StormShot2-Soul","StormShot2Crisis-Soul",112,true,true,0.0); }
					else { A_HellSoulFire1("",1375,"StormShot1-Soul","StormShot1Crisis-Soul",112,true,true,0.0); }
				}
				if (CallACS("HellcoreFireMode",1,5) == 1) // Hyper Spread Shot Mode
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
					
					invoker.heightoffset = -30;
					A_HellSoulSpark();
					A_HellSoulCrisisCheck();
					A_HellSoulFire1("",40,"HadesOverlordBall-Soul","HadesOverlordBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),59+invoker.heightoffset,-16.77,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"HadesOverlordBall-Soul","HadesOverlordBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),5+invoker.heightoffset,-16.77,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"HadesOverlordBall-Soul","HadesOverlordBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),59+invoker.heightoffset,16.77,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"HadesOverlordBall-Soul","HadesOverlordBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),5+invoker.heightoffset,16.77,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"OverBall-Soul","OverBallCrisis-Soul",112,true,false,frandom(-3.0,3.0),random(34,35)+invoker.heightoffset,-20.97,frandom(-3.0,3.0));
					A_HellSoulFire1("",40,"OverBall-Soul","OverBallCrisis-Soul",112,true,true,frandom(-3.0,3.0),random(34,35)+invoker.heightoffset,20.97,frandom(-3.0,3.0));
				}
			}
			HCL1 L 4 bright
			{
				if (CallACS("HellcoreFireMode",1,5) == 0) // Storm Shot Mode
				{
					A_SetTics(4);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(3); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 4) { A_SetTics(2); }
				}
				if (CallACS("HellcoreFireMode",1,5) == 1) // Hyper Spread Shot Mode
				{
					A_SetTics(3);
					if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
					if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
				}
			}
			HCL1 I 0
			{
				if (random(1,6) == 1) { A_Refire("ReFireAnim2"); }
				else { A_Refire("ReFireAnim1"); }
			}
			HCL1 I 0
			{
				return resolvestate("FireEnd");
			}

		FireEnd:
			HCL1 DC 2
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
			}
			Goto Ready;

		// Alt Fire
		AltFire:
			HCL1 MN 2
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
			}
			HCL1 N 0
			{
				if (random(1,2) == 1) { return resolvestate("AltFire2"); }
				else { return resolvestate("AltFire1"); }
				return resolvestate(null);
			}
		AltFire1:
			HCL1 O 2
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
			}
		AltReFireAnim1:
			HCL1 P 2 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
			}
			HCL1 Q 2 bright
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
				
				A_HellSoulHEleSpawn("FHSOverlord", 112, 175, 45.0, 12.0);
			}
			HCL1 R 2 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
			}
			HCL1 O 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim1"); }
				else { A_Refire("AltReFireAnim2"); }
			}
			HCL1 O 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFire2:
			HCL1 S 2
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
			}
		AltReFireAnim2:
			HCL1 T 2 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
			}
			HCL1 U 2 bright 
			{
				A_HellSoulSpark();
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
				
				A_HellSoulHEleSpawn("FHSOverlord", 111, 175, 45.0, 12.0);
			}
			HCL1 V 2 bright
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 3) { A_SetTics(1); }
			}
			HCL1 S 0
			{
				if (random(1,6) == 1) { A_Refire("AltReFireAnim2"); }
				else { A_Refire("AltReFireAnim1"); }
			}
			HCL1 S 0
			{
				return resolvestate("AltFireEnd");
			}

		AltFireEnd:
			HCL1 NM 3
			{
				if (CallACS("MiscVarCheckDECORATE",10033) >= 2) { A_SetTics(2); }
				if (CallACS("MiscVarCheckDECORATE",10033) >= 5) { A_SetTics(1); }
			}
			Goto Ready;

		User4:
			HCL1 A 5 
			{
				A_StartSound("elecstun",102, CHANF_DEFAULT, 1.0, ATTN_NORM, frandom(1.25,1.75));
				CallACS("HellcoreFireMode",0,5);
			}
			Goto Ready;
	}
}